{"version":3,"file":"basicloader.js","mappings":"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","sources":["webpack://B3/./src/sys/modules/canvas/symbols.js","webpack://B3/./src/sys/modules/canvas/simpletiles.js","webpack://B3/./src/sys/modules/mrbeep/mrbeep-channel.js","webpack://B3/./src/sys/modules/mrbeep/mrbeep.js","webpack://B3/./src/sys/modules/basicmenu/menudata.js","webpack://B3/./src/sys/modules/basicmenu/handlers.js","webpack://B3/./src/sys/bootloader_static.js","webpack://B3/./src/sys/bootcfg.js","webpack://B3/./src/sys/bootsys.js","webpack://B3/./src/sys/modules/displaymodes.js","webpack://B3/./src/sys/modules/tablecon.js","webpack://B3/./src/sys/modules/canvas/module.js","webpack://B3/./src/sys/modules/mrbeep/module.js","webpack://B3/./src/sys/modules/simplewarning.js","webpack://B3/./src/sys/modules/privwarning.js","webpack://B3/./src/sys/modules/mutedinput.js","webpack://B3/./src/sys/modules/domelinput.js","webpack://B3/./src/sys/modules/htmlwrapper.js","webpack://B3/./src/sys/modules/basic/module.js","webpack://B3/./src/sys/modules/basicmenu/module.js","webpack://B3/./src/sys/modules/fs/sessionfs.js","webpack://B3/./src/sys/modules/fs/lfs.js","webpack://B3/./src/sys/modules/fs/ramfs.js","webpack://B3/./src/sys/modules/fs/scripturl.js","webpack://B3/./src/sys/modules/fs/qfs.js"],"sourcesContent":["/* Generated blob URL, from img/symbolscii2c.png */\n\n\nclass SYMBOLSIMAGE {\n\n  getBlobURL() {\n\n    var url =\n\"data:image/png;base64,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\"\n    ;\n\n    return url;\n  }\n\n}\nexport { SYMBOLSIMAGE as default};\n","\nclass TILES {\n\n\tconstructor( img, gridw, gridh, transCol ) {\n\n\t\t\tthis.img = img;\n\t\t\tthis.gridw = gridw;\n\t\t\tthis.gridh = gridh;\n\n\t\t\tthis.iconGrid = [];\n\n\t\t\tvar w = this.img.width;\n\t\t\tvar h = this.img.height;\n\n\t\t\tthis.iconCanvas = document.createElement('canvas');\n\t\t\tthis.iconContext = this.iconCanvas.getContext('2d');\n\n\t\t\tthis.iconCanvas.width = \tw;\n\t\t\tthis.iconCanvas.height = \th;\n\n\t\t\tthis.iconContext.drawImage( this.img, 0, 0, w, h);\n\n\t\t\tthis.xiconcount = w / this.gridw;\n      this.xiconrowcount = h / this.gridh;\n\n\n      for (var yicon = 0; yicon < this.xiconrowcount; yicon++) {\n\t\t\tfor (var xicon = 0; xicon < this.xiconcount; xicon++) {\n\n\t\t\t\tvar sx = (xicon * this.gridw);\n\t\t\t\tvar sy = (yicon * this.gridh);\n\t\t\t\tvar imgdata = this.iconContext.getImageData(sx, sy, this.gridw, this.gridh);\n\t\t\t\tvar sd  = imgdata.data;\n\n\t\t\t\tvar xoffset = 0;\n\t\t\t\tvar yoffset = 0;\n\t\t\t\tvar rowoffset = this.gridw * 4;\n\t\t\t\tvar offset;\n\n\t\t\t\tvar grid = [];\n\t\t\t\tfor (var y = 0; y < this.gridh; y++) {\n\t\t\t\t\txoffset = 0;\n\n\t\t\t\t\tvar row = [];\n\t\t\t\t\tfor (var x = 0; x < this.gridw; x++) {\n\t\t\t\t\t\tvar pix = 1;\n\n\t\t\t\t\t\toffset = yoffset + xoffset;\n\n\t\t\t\t\t\tif( sd[ offset + 0] == transCol.r && sd[ offset + 1] == transCol.g && sd[ offset + 2] == transCol.b )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpix = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.push( pix );\n\t\t\t\t\t\txoffset += 4;\n\t\t\t\t\t}\n\t\t\t\t\tgrid.push( row );\n\t\t\t\t\tyoffset += rowoffset;\n\t\t\t\t}\n\n\t\t\t\t//dcontext.putImageData( dimgdata, 0, 0);\n\t\t\t\tthis.iconGrid.push( grid  );\n\t\t\t\t//this.iconsContext.push( dcontext );\n\t\t\t}\n      }\n\n      this.iconCanvas = null;\n      this.iconContext = null;\n      this.img = null;\n\t}\n\n\n\tgetCharData( i ) {\n\n\t\treturn this.iconGrid[ i ];\n  }\n\n}\n\n\n\nexport { TILES as default};\n","class MrBeepChannel {\n\n  constructor( audioCtx, waveform, masterVolume, volumeFunc ) {\n    this.audioCtx = audioCtx;\n    this.waveform = waveform;\n    this.masterVolume = masterVolume;\n    this.volumeFunc = volumeFunc;\n\n    this.initialized = false;\n    this.initializedFully = false;\n\n    this.effects = [];\n\n    this.FLR = 10;\n    this.FS = 11;\n    this.VLR = 20;\n    this.VS = 21;\n\n  }\n\n  enable() {\n    this._init();\n  }\n\n  disable() {\n    this.maxGain.gain.value=0.0;\n  }\n\n  _init() {\n\n    if( this.initialized ) {\n      return;\n    }\n\n    this.initialized = true;\n\n    this.maxGain = this.audioCtx.createGain();\n    this.maxGain.connect( this.masterVolume );\n\n    this.maxGain.gain.value=0.0;\n    this.volumeValue = 0.0;\n\n    this.gain = this.audioCtx.createGain();\n    this.gain.connect( this.maxGain );\n\n    if( this.waveform == \"noise\" ) {\n\n\n      //var from = 300;\n      //var to = 30000;\n      //var geometricMean = Math.sqrt(from * to);\n      //this.filter.Q.value = geometricMean / (to - from);\n\n      this.filter = this.audioCtx.createBiquadFilter();\n\n      this.filter.type = \"bandpass\";\n      this.filter.frequency.value = 440;\n      this.frequency = this.filter.frequency;\n      this.filter.Q.value = 5;\n      this.filter.connect(this.gain);\n\n      var bufferSize = 4096;\n\n      var b0, b1, b2, b3, b4, b5, b6;\n      b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n      var node = this.audioCtx.createScriptProcessor(bufferSize, 1, 1);\n      node.onaudioprocess = function(e) {\n          var output = e.outputBuffer.getChannelData(0);\n          for (var i = 0; i < bufferSize; i++) {\n              var white = Math.random() * 2 - 1;\n              b0 = 0.99886 * b0 + white * 0.0555179;\n              b1 = 0.99332 * b1 + white * 0.0750759;\n              b2 = 0.96900 * b2 + white * 0.1538520;\n              b3 = 0.86650 * b3 + white * 0.3104856;\n              b4 = 0.55000 * b4 + white * 0.5329522;\n              b5 = -0.7616 * b5 - white * 0.0168980;\n              output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n              output[i] *= 0.11; // (roughly) compensate for gain\n              b6 = white * 0.115926;\n          }\n      }\n\n      this.occilator = node;\n      this.occilator.connect( this.filter );\n\n      this.gain.gain.value=0.0;\n      this.gain.gain.setValueAtTime(0, this.audioCtx.currentTime);\n\n      this.initializedFully = true;\n\n\n    }\n    else {\n      // we create the gain module, named as volume, and connect it to our\n      //these sines are the same, exept for the last connect statement.\n      //Now they are connected to the volume gain module and not to the au\n\n      this.filter = null;\n\n      this.occilator = this.audioCtx.createOscillator();\n      this.occilator.frequency.value = 440;\n      this.frequency = this.occilator.frequency;\n\n      this.occilator.type = this.waveform;\n      this.occilator.connect(this.gain);\n      this.gain.gain.value=0.0;\n      this.gain.gain.setValueAtTime(0, this.audioCtx.currentTime);\n      this.occilator.start(0);\n      this.initializedFully = true;\n\n\n\n\n    }\n  }\n\n  setVolume( volume ) {\n\n    this.enable();\n\n    this.maxGain.gain.value= volume;\n    this.volumeValue = volume;\n\n    if( volume == 0) {\n      this.disable();\n    }\n\n  }\n\n  playBeep( frequency, duration ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds = duration / 1000;\n    var durInSeconds0 = durInSeconds/20;\n    var durInSeconds1 = durInSeconds - (durInSeconds/20);\n    var durInSeconds2 = durInSeconds;\n    varnow=this.audioCtx.currentTime;\n\n    this.frequency.cancelScheduledValues(now);\n    this.gain.gain.cancelScheduledValues(now);\n\n    this.frequency.setValueAtTime( frequency, now);\n\n    this.gain.gain.linearRampToValueAtTime(1.0 ,now+durInSeconds0);\n    this.gain.gain.linearRampToValueAtTime(1.0 ,now+durInSeconds1);\n    this.gain.gain.linearRampToValueAtTime(0.0 ,now+durInSeconds2);\n\n  }\n\n  clearEffect() {\n    this.effects  = [];\n  }\n\n  addEffect( type , value, time ) {\n    if( this.effects.length > 254 ) {\n      return;\n    }\n\n    this.effects.push( {\n      type: type ,\n      value: value,\n      time: time\n      }\n    );\n  }\n\n  playEffect( freq ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    varnow=this.audioCtx.currentTime;\n\n    this.gain.gain.cancelScheduledValues(now);\n    this.frequency.cancelScheduledValues(now);\n\n    //this.maxGain.gain.value= this.volumeValue;\n\n    var jiffy = 0.000001;\n    now = now + jiffy;\n\n    for( var i = 0; i < this.effects.length ; i++) {\n      var e = this.effects[ i ];\n      if( e.type == this.VLR ) {\n        this.gain.gain.linearRampToValueAtTime( e.value ,now+ e.time/1000 );\n      }\n      else if( e.type == this.FLR ) {\n        this.frequency.linearRampToValueAtTime( e.value + freq ,now+ e.time/1000 );\n      }\n      else if( e.type == this.VS ) {\n        this.gain.gain.setValueAtTime( e.value ,now+ e.time/1000 );\n      }\n      else if( e.type == this.FS ) {\n        this.frequency.setValueAtTime( e.value  + freq,now+ e.time/1000 );\n      }\n\n    }\n\n  }\n\n  setAttackDecayRelease( attackT, decayT, releaseT ) {\n\n    this.attackT = attackT;\n    this.decayT = decayT;\n    this.releaseT = releaseT;\n\n  }\n\n  setSustainLevel( sustainV ) {\n\n    this.sustainV = sustainV;\n\n  }\n\n\n  playSound( frequency, sustainT ) {\n\n    varnow=this.audioCtx.currentTime;\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds0 = (this.attackT/1000);\n    var durInSeconds1 = (this.attackT/1000) + (this.decayT/1000);\n    var durInSeconds2 = (this.attackT/1000) + (this.decayT/1000) + (sustainT/1000) ;\n    var durInSeconds3 = (this.attackT/1000) + (this.decayT/1000) + (sustainT/1000) + (this.releaseT/1000);\n\n    this.frequency.cancelScheduledValues(now);\n    this.gain.gain.cancelScheduledValues(now);\n    //this.frequency.value = frequency;\n    this.frequency.setValueAtTime( frequency,now );\n\n    this.gain.gain.linearRampToValueAtTime( 1.0              ,now+durInSeconds0);\n    this.gain.gain.linearRampToValueAtTime( this.sustainV    ,now+durInSeconds1);\n    this.gain.gain.linearRampToValueAtTime( this.sustainV    ,now+durInSeconds2);\n    this.gain.gain.linearRampToValueAtTime( 0                ,now+durInSeconds3);\n\n  }\n\n  setFrequency( f ) {\n\n    varnow=this.audioCtx.currentTime;\n    this.frequency.cancelScheduledValues( now );\n    //this.frequency.value = f;\n    this.frequency.setValueAtTime( f,now );\n  }\n\n  startSound( frequency ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds0 = this.attackT/1000;\n    var durInSeconds1 = (this.attackT/1000) + (this.decayT/1000);\n\n    //this.frequency.value = frequency;\n    this.frequency.cancelScheduledValues(now);\n    this.frequency.setValueAtTime( frequency,now );\n\n    varnow=this.audioCtx.currentTime;\n    this.gain.gain.cancelScheduledValues(now);\n\n    this.gain.gain.linearRampToValueAtTime(1.0              ,now+durInSeconds0);\n    this.gain.gain.linearRampToValueAtTime( this.sustainV   ,now+durInSeconds1);\n\n  }\n\n  releaseSound( frequency ) {\n\n    this._init();\n    if( !this.initializedFully ) { return; }\n\n    var durInSeconds0 = this.releaseT/1000;\n\n    this.frequency.value = frequency;\n\n    varnow=this.audioCtx.currentTime;\n    this.gain.gain.cancelScheduledValues(now);\n\n    this.gain.gain.linearRampToValueAtTime(0.0              ,now+durInSeconds0);\n\n  }\n\n}\n\nexport { MrBeepChannel as default};\n","class MrBeep {\n\n  constructor( MrBeepChannel ) {\n    this.audioCtx = new (window.AudioContext || window.webkitAudioContext);\n\n    this.masterVolume = { value: 0.8 };\n    this.channels = [];\n    this.defaults = [\n      \"square\",\"sawtooth\",\"triangle\", \"sine\",\n      \"noise\",\"square\",\"sawtooth\", \"triangle\"\n    ]\n\n    this.masterGain = this.audioCtx.createGain();\n    this.masterGain.connect( this.audioCtx.destination );\n    this.masterGain.gain.value=0.0;\n    this.channelCount = 8;\n\n    for( var i=0; i<this.channelCount; i++) {\n        this.channels.push( new MrBeepChannel( this.audioCtx, this.defaults[ i ], this.masterGain, this._int_v2g ) );\n    }\n\n    this.FLR = 10;\n    this.FS = 11;\n    this.VLR = 20;\n    this.VS = 21;\n  }\n\n  _int_log10(x) {\n    return Math.log(x)/Math.LN10;\n  }\n\n  _int_v2g(v) {\n    //var x = -this._int_log10( 1-(v*.9));\n    var x = -Math.log( 1-(v*.9) )/Math.LN10;\n\n    console.log( v, \"->\", x);\n    return x;\n  }\n\n  reset() {\n    for( var i=0; i<this.channelCount; i++) {\n        this.channels[i].setVolume( 0 );\n        this.channels[i].clearEffect();\n    }\n  }\n\n  setVolume( v ) {\n    //var x = -this._int_log10( 1-(l*.9));//Math.pow(10, (decibel_level / 20));\n\n    this.masterGain.gain.value= this._int_v2g( v );\n  }\n\n  channelVolume( channel, x ) {\n    this.channels[ channel ].setVolume( x );\n  }\n\n  channelFrequency( channel, f ) {\n    this.channels[ channel ].setFrequency( f );\n  }\n\n  channelSetAttackDecayRelease( channel, attackT, decayT, releaseT ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].setAttackDecayRelease( attackT, decayT, releaseT );\n  }\n\n  channelSetSustainLevel( channel,  sustainV ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].setSustainLevel( sustainV );\n  }\n\n\n  playBeep( channel, frequency, duration ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].playBeep( frequency, duration );\n  }\n\n  playSound( channel, frequency, duration ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].playSound( frequency, duration );\n  }\n\n\n  startSound( channel, frequency ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].startSound( frequency );\n  }\n\n  releaseSound( channel, frequency ) {\n    if( channel <0 || channel > 7) {\n      throw \"MrBeep:no such channel \" + channel;\n    }\n\n    this.channels[ channel ].releaseSound( frequency );\n  }\n\n  addEffect( channel,  type , value, time ) {\n    this.channels[ channel ].addEffect( type , value, time );\n  }\n\n  clearEffect( channel ) {\n    this.channels[ channel ].clearEffect();\n  }\n\n  playEffect( channel, freq ) {\n    this.channels[ channel ].playEffect( freq );\n  }\n}\n\nexport { MrBeep as default};\n","class DATA {\n\n\tconstructor() {\n\n\t\t//opt: \"name\", means use as suffix string call a handler in basicmenu/apps main class\n\t\t//opt: \"@name\", means, call a handler in basic/apps main class\n\n\t\tthis.options = {};\n\n\t\tvar opts = [];\n    opts.push({opt: \"file\", display: \"File\" });\n    opts.push({opt: \"copy\", display: \"Copy\" });\n\t\topts.push({opt: \"basic\", display: \"Basic\" });\n\t\topts.push({opt: \"screeneditor\", display: \"Screen\" });\n\t\topts.push({opt: \"help\", display: \"Help\" });\n\n    this.options[\"main\"] = opts;\n\n    opts = [];\n    opts.push({opt: \"@requestClipboardCopy\", display: \"Copy program\" });\n\t\tif( navigator.clipboard.readText ) {\n\t\t\topts.push({opt: \"pasteFromClip\", data: \"pgm\", display: \"Paste program\" });\n\t\t} else {\n\t\t\topts.push({opt: \"pasteBox\", data: \"pgm\", display: \"Paste program\" });\n\t\t}\n    opts.push({opt: \"@requestClipboardCopyScreen\", display: \"Copy screen data\" });\n    if( navigator.clipboard.readText ) {\n\t\t\topts.push({opt: \"pasteFromClip\", data: \"txt\", display: \"Paste text\" });\n\t\t} else {\n\t\t\topts.push({opt: \"pasteBox\", data: \"txt\", display: \"Paste text\" });\n\t\t}\n    this.options[\"copy\"] = opts;\n\n    opts = [];\n\t\topts.push({opt: \"@requestRun\", display: \"Run\" });\n\t\topts.push({opt: \"@requestStop\", display: \"Stop\" });\n    opts.push({opt: \"@requestList\", display: \"List Program\" });\n\t\topts.push({opt: \"@requestVars\", display:  \"Debug: List Variables\" });\n\t\topts.push({opt: \"@requestDataBlocks\", display:  \"Debug: List Data-blocks\" });\n\t\topts.push({opt: \"@requestRenumber\", display:  \"Renumber Program\" });\n\t\topts.push({opt: \"@requestNew\", display:  \"New Program\" });\n    this.options[\"basic\"] = opts;\n\n    opts = [];\n\t\topts.push({opt: \"@requestListDirectory\", display: \"List directory\" });\n\t\topts.push({opt: \"@requestFileSystems\", display: \"List file systems\" });\n\t\topts.push({opt: \"@requestListScripts\", display: \"List embedded scripts\" });\n    opts.push({opt: \"@requestExport\", display: \"Export Basic Program\" });\n    this.options[\"file\"] = opts;\n\n\t\topts = [];\n\t\topts.push({opt: \"@requestResetConsole\", display: \"Reset Console\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 1, bg:0, border: 10 }, display: \"Dark Mode 1\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 14, bg:0, border: 0 },display: \"Dark Mode 2\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 5, bg:0, border: 10 },display: \"Dark Mode 3\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:8, border: 0 },display: \"Light Mode 1\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:8, border: 10 },display: \"Light Mode 2\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:1, border: 10 },display: \"Light Mode 3\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 15, bg:4, border: 15 },display: \" C64 Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 14, bg:10, border: 14 },display: \"C128 Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 4, bg:1, border: 6 },display: \"Vic20 Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 0, bg:9, border: 9 },display: \"ZX-Spectrum Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 1, bg:4, border: 4 },display: \"MSX Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 1, bg:0, border: 0 },display: \"BBC Theme\" });\n\t\topts.push({opt: \"@requestColorReset\", data: { fg: 3, bg:0, border: 0 },display: \"Apple2 Theme\" });\n    this.options[\"screeneditor\"] = opts;\n\n\t\topts = [];\n\t\topts.push({opt: \"@requestHelp\", display: \"Basic Commands\" });\n\t\topts.push({opt: \"@requestAbout\", display: \"About\" });\n    this.options[\"help\"] = opts;\n\n\t}\n\n\tgetOptions() {\n\t\treturn this.options;\n\t}\n}\n\nexport { DATA as default};\n","class HANDLERS {\n\n\tconstructor( menuSys ) {\n\t\tthis.menuSys = menuSys;\n\t\tthis.sys = this.menuSys.sys;\n\n\t}\n\n\tsetBasic() {\n\t\tthis.basic = this.sys.m.basic;\n\t}\n\n\tdoExposedAction( id, data ) {\n\n\t\tif( id == \"paste\" ) {\n\t\t\tif( !navigator.clipboard.readText ) {\n\t\t\t\tthis.handler_pasteBox( data );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.handler_pasteFromClip( data );\n\t\t\t}\n\t\t}\n\t}\n\n\thandler_pasteBox( type ) {\n\n\t\tthis.menuSys.pastebox.style.display = \"block\";\n\t\tthis.menuSys.pasteArea.value = this.menuSys.defaultPasteText;\n\n\t\tthis.oldInnerText = this.menuSys.pasteArea.innerText;\n\n\t\tthis.input = this.sys.input;\n    this.input.unsetInputHandler();\n\n\t\tthis.menuSys.clearMenu();\n\t\tthis.menuSys.hideMenu();\n\n\t\tthis.menuSys.pasteArea.style.color = this.menuSys.color;\n\t\tthis.menuSys.pasteArea.style.backgroundColor = this.menuSys.bgColor;\n\n\t\tthis.menuSys.pasteArea.focus();\n\t\tthis.menuSys.pasteArea.select();\n\n\t\tthis.sys.out.hideInner();\n\n\t\tvar __this = this;\n\n\t\tthis.pasteHandler = function ( e ) {\n\t\t\tsetTimeout(__this.pasteHandler2 , 10 );\n\t\t}\n\n\t\tthis.pasteHandler2 = function( e ) {\n\t\t\t__this.sys.out.showInner();\n\t\t\t__this.menuSys.unhideMenu();\n\t\t\t__this.basic.setInput( __this.sys.input );\n\t\t\t__this.menuSys.pasteArea.removeEventListener( \"paste\", __this.pasteHandler );\n\t\t\t__this.menuSys.pastebox.style.display = \"none\";\n\t\t\tif( __this.oldInnerText != __this.menuSys.pasteArea.value ) {\n\t\t\t\t__this.basic.pasteTextFromClipboard( __this.menuSys.pasteArea.value, type );\n\t\t\t}\n\n\t\t}\n\n\t\tthis.menuSys.pasteArea.addEventListener(\"paste\", this.pasteHandler);\n\t\t//this.menuSys.pasteArea.addEventListener(\"paste\", this.pasteHandler);\n\t}\n\n\n\thandler_pasteFromClip( type ) {\n\t\tvar __this = this;\n\n\t\tif( !navigator.clipboard.readText ) {\n\t\t\talert(\"Clipboard reading is disabled in your browser\\nYou have to enable it to make this feature work.\");\n\t\t}\n\n\t\tnavigator.clipboard.readText().then(\n\t\t\t(clipText) => {\n\t\t\t\t__this.basic.pasteTextFromClipboard( clipText, type );\n\t\t\t} );\n\n\t}\n\n}\n\nexport { HANDLERS as default};\n","const staticLoading = true;\n\nimport  BootCfg   from        './bootcfg.js';\nimport  BootSys   from        './bootsys.js';\n\nimport  displaymodes   from        './modules/displaymodes.js';\nimport  tablecon   from        './modules/tablecon.js';\nimport  canvas   from        './modules/canvas/module.js';\nimport mrbeep  from       './modules/mrbeep/module.js';\nimport  simplewarning  from   './modules/simplewarning.js';\nimport  privwarning from     './modules/privwarning.js';\nimport  mutedinput from      './modules/mutedinput.js';\nimport domelinput from      './modules/domelinput.js';\nimport htmlwrapper from     './modules/htmlwrapper.js';\nimport sessionfs  from       './modules/fs/sessionfs.js';\nimport lfs  from             './modules/fs/lfs.js';\nimport ramfs  from           './modules/fs/ramfs.js';\nimport qfs  from             './modules/fs/qfs.js';\nimport scripturl  from       './modules/fs/scripturl.js';\nimport basic from           './modules/basic/module.js';\nimport basicmenu from           './modules/basicmenu/module.js';\n\nvar bootCfg = new BootCfg(  );\nvar boot = new BootSys( bootCfg, staticLoading );\nvar sys = boot.getSys();\n\n\nboot.dep = {};\nboot.i = {}\nboot.i.displaymodes = displaymodes;\nboot.i.tablecon = tablecon;\nboot.i.canvas = canvas;\nboot.i.mrbeepaudio = mrbeep;\nboot.i.simplewarning = simplewarning;\nboot.i.priv = privwarning;\nboot.i.mutedinput = mutedinput;\nboot.i.domelinput = domelinput;\nboot.i.htmlwrapper = htmlwrapper;\nboot.i.basic = basic;\nboot.i.basicmenu = basicmenu;\nboot.i.sfs = sessionfs\nboot.i.cache = lfs;\nboot.i.ramfs = ramfs;\nboot.i.script = scripturl;\nboot.i.qfs = qfs;\nboot.dep.basicmenu = [ \"domelinput\" ];\nboot.dep.qfs = [ \"ramfs\", \"cache\", \"sfs\", \"script\" ];\nboot.dep.basic = [ \"canvas\", \"tablecon\", \"displaymodes\", \"mrbeepaudio\", \"qfs\", \"htmlwrapper\", \"basicmenu\" ];\n\nboot.initSimpleLogging();\n\n/* Instantiate modules */\nfunction addModule( m, toList, checkL ) {\n\n  if( checkL >= 5 ) {\n    var tmp = 1;\n    console.log(\"HALT, probably dependency recursion detected\" );\n    throw \"HALT, probably dependency recursion detected\";\n    return;\n  }\n\n  console.log(\" dependencies for \" + m + \" checkL=\" + checkL );\n  if( boot.dep[ m ]) {\n    console.log(\"FOUND DEPENDENCY LIST for \" + m );\n    var deps = boot.dep[ m ];\n    for( var j=0;j<deps.length;j++) {\n      console.log(\" add dependency:  \" + deps[ j ] );\n      addModule( deps[j], mods, checkL + 1 );\n    }\n  }\n\n  var exists = false;\n  for( var ci=0;ci<toList.length;ci++) {\n    if( toList[ ci ] == m ) {\n      exists = true;\n      return;\n    }\n  }\n\n  console.log(\"ADD MODULE \" + m );\n  toList.push( m );\n}\n\nvar mods0 = Object.getOwnPropertyNames( boot.i );\nvar mods = [];\nfor( var i=0;i<mods0.length;i++) {\n  var m = mods0[i];\n  if( mods0[ i ]  === undefined ) {\n    continue;\n  }\n\n\n  addModule( m, mods, 0 );\n\n}\n\n\nfor( var i=0;i<mods.length;i++) {\n  console.log(\"construct \" + mods[ i ] );\n  boot.m[ mods[i] ] = new boot.i[ mods[i] ]( sys, boot.dep[ mods[i] ] );\n}\n\nsys.audio = sys.m.mrbeepaudio;\n\nsys.init.queuedMessages = sys.nulcon;\nsys.init.conStyle = boot.conStyle;\nsys.init.displayMode = boot.displayMode;\nsys.m = boot.m;\nsys.fs =  boot.m.qfs;\nsys.input = boot.m.domelinput;\nsys.m.displaymodes.setMode( boot.displayMode, sys.m.basicmenu );\nboot.out = sys.out;\n\n\n/* Initialize modules */\nfor( var i=0;i<mods.length;i++) {\n  console.log(\"init \" + mods[ i ] );\n  boot.m[ mods[i] ].init();\n}\n\n/* Get the boot script */\n\ntry {\n\n\n  var script = boot.rootScript.dataset.script;\n  if( script == null ) { script = \"autorun.bas\"; }\n  boot.onReady = \"script://\" + script;\n}\ncatch ( e ) {\n  alert( \"HALT: Boot-Onready Handler not found!!\");\n  throw \"HALT - Neither root-script-attribute 'basScript' or constant 'BOOT_ONREADY' defined.\";\n}\n\n\nsys.nulcon = undefined;\nboot.input = boot.m.domelinput;\nconsole.log( \"boot.basic=\",boot.basic );\nboot.m.basic.setInput( boot.input );\nboot.m.basic.loadApp(  boot.onReady );\n","class BOOTCFG {\n\n  constructor() {\n\n    this.fs = {};\n    this.fs.default = \"cache\";\n\n    this.display = {}\n    this.display.mode = 100;\n\n    this.warnings = {};\n    this.warnings.privacyMute = true;\n\n    this.subSys = \"S3\";\n\n    this.keyboard = {};\n    this.keyboard.allowDefault = {};\n    var allowDefault = this.keyboard.allowDefault;\n    allowDefault.all = false;\n    allowDefault.events = [];\n\n    var adEvents = allowDefault.events;\n    adEvents.push(\"F5\");\n    adEvents.push(\"F12\");\n\n  }\n\n}\n\nexport { BOOTCFG as default};\n","class COMMONBOOTLOADER {\n\n  constructor( cfg, staticFlag ) {\n\n    var sys = {};\n    this.m = {};\n    sys.m = this.m;\n    sys.bootCfg = cfg;\n    this.sys = sys;\n    sys.init = {};\n    sys.staticTarget = staticFlag;\n    sys.headerElement = null;\n\n    sys.domContainer = document.createElement(\"div\");\n    document.body.appendChild( sys.domContainer );\n\n    sys.SIG = \"BOSS64\";\n    sys.SUBSYS = sys.bootCfg.subSys;\n    sys.VERSION = \"0.2\";\n    sys.CODENAME = \"Papa Smurf\";\n\n    sys.nulcon = [];\n    sys.nulcon.push(\"Starting System...\");\n    sys.nulcon.push(\"SYS version \" + sys.VERSION);\n    sys.nulcon.push(\"SYS name \" + sys.SIG + \":\" + sys.SUBSYS + \" \\\"\" + sys.CODENAME + \"\\\"\");\n    sys.nulcon.push(\"SYS release name \\\"\" + sys.CODENAME + \"\\\"\");\n    sys.nulcon.push(\"Starting Boot Sequence...\");\n\n    var rootScript = document.getElementById(\"boot\");\n    this.rootScript = rootScript;\n\n    this.displayMode = parseInt( rootScript.dataset.mode );\n    if( isNaN( this.displayMode ) ) {\n      this.displayMode = cfg.display.mode;\n    }\n\n    this.bootMode = rootScript.dataset.boot;\n\n    this.dynamicMinTarget = false;\n    if( this.bootMode ) { this.dynamicMinTarget = (this.bootMode.indexOf(\"min\") >= 0) };\n    sys.dynamicMinTarget = this.dynamicMinTarget;\n\n    this.bootDebug = (this.bootMode.indexOf(\"debug\") >= 0);\n\n    if( this.bootDebug ) {\n      sys.nulcon.push(\"Enabled debug mode\");\n    }\n\n    if( this.dynamicMinTarget ) {\n      sys.nulcon.push(\"Enabled minimal target settings for dynamic mode\");\n    }\n\n    document.body.style.backgroundColor = \"#444444\";\n  }\n\n  getSys() {\n    return this.sys;\n  }\n\n  initSimpleLogging() {\n\n    /*primitive logging, before it is setup fully*/\n\n    var sys = this.sys;\n\n    sys.out = {\n      buf: \"\"\n    };\n\n    var out = sys.out;\n\n    sys.out.getAll = function() {\n      return out.buf;\n    }\n\n    sys.out.writeln = function( txt ) {\n      var s = \"$\" + txt +\"\\n\";\n      out.buf += s;\n      console.log( s );\n    }\n\n    out.writeln( \"$Init logging...\" );\n\n    sys.rawlog = function( type, array ) {\n\n      var line = array;\n      var txt = \"\";\n\n      txt +=  ( type + \": \" );\n\n      for( var j=0; j<line.length; j++) {\n          var sep = \" \";\n          if( j==0 ) { sep = \"\" };\n          txt += ( sep + line[j] );\n      }\n\n      sys.out.writeln( txt );\n\n    }\n\n    sys.rawlogcon = function( type, array ) {\n\n      var line = array;\n      var txt = \"\";\n\n      txt +=  ( type + \": \" );\n\n      for( var j=0; j<line.length; j++) {\n          var sep = \" \";\n          if( j==0 ) { sep = \"\" };\n          txt += ( sep + line[j] );\n      }\n\n      console.log( txt );\n\n    }\n\n    sys.log = function() {\n      var args = Array.prototype.slice.call(arguments);\n      sys.rawlog( \"info\", args );\n      console.log.apply(console, args);\n    }\n\n    sys.logwarn = function() {\n      var args = Array.prototype.slice.call(arguments);\n      sys.rawlog( \"warn\", args );\n      console.warn(args);\n    }\n\n    sys.logerr = function() {\n      var args = Array.prototype.slice.call(arguments);\n      sys.rawlog( \"error\", args );\n      console.error.apply(console, args);\n    }\n\n    this.logerr = sys.logerr;\n    this.logwarn = sys.logwarn;\n    this.log = sys.log;\n\n    if( !this.bootDebug ) {\n      sys.rawlog = sys.rawlogcon;\n    }\n  }\n\n\n}\n\nexport { COMMONBOOTLOADER as default};\n","class KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.initialized = false;\n\t\tthis.default = 100;\n\n\t\tthis.sys = sys;\n\t\tthis.drivers = [];\n\n\t}\n\n\tinit() {\n\n\t\t\tif( this.initialized ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.drivers[\"text\"] = this.sys.m.tablecon;\n\t\t\tthis.drivers[\"canvas\"] = this.sys.m.canvas;\n\n\t\t\tthis.modes = [];\n\n\t\t\tvar textmode1 = \"text:80x30\";\n\t\t\tvar textmode2 = \"text:80x50\";\n\t\t\tvar textmode3 = \"text:80x150\";\n\n\t\t\tvar fontSmall = \t\"font=14\";\n\t\t\tvar fontMedium1 = \"font=16\";\n\t\t\tvar fontMedium2 = \"font=18\";\n\t\t\tvar fontBig = \t\t\"font=22\";\n\n\t\t\tthis.modes[0] = textmode1 + \":\" + fontSmall;\n\t\t\tthis.modes[1] = textmode1 + \":\" + fontMedium1;\n\t\t\tthis.modes[2] = textmode1 + \":\" + fontMedium2;\n\t\t\tthis.modes[3] = textmode1 + \":\" + fontBig;\n\n\t\t\tthis.modes[4] = textmode2 + \":\" + fontSmall;\n\t\t\tthis.modes[5] = textmode2 + \":\" + fontMedium1;\n\t\t\tthis.modes[6] = textmode2 + \":\" + fontMedium2;\n\t\t\tthis.modes[7] = textmode2 + \":\" + fontBig;\n\n\t\t\tthis.modes[8] = textmode3 + \":\" + fontSmall;\n\t\t\tthis.modes[9] = textmode3 + \":\" + fontMedium1;\n\t\t\tthis.modes[10] = textmode3 + \":\" + fontMedium2;\n\t\t\tthis.modes[11] = textmode3 + \":\" + fontBig;\n\n\t\t\tthis.modes[100] = \"canvas:%95\";\n\n\t\t\tthis.modes[101] = \"canvas:%85\";\n\t\t\tthis.modes[102] = \"canvas:%75\";\n\t\t\tthis.modes[103] = \"canvas:%65\";\n\t\t\tthis.modes[104] = \"canvas:%45\";\n\t\t\tthis.modes[105] = \"canvas:%35\";\n\t\t\tthis.modes[106] = \"canvas:%25\";\n\t\t\tthis.modes[107] = \"canvas:%15\";\n\n\t\t\tthis.modes[110] = \"canvas:%%95,25\";\n\t\t\tthis.modes[111] = \"canvas:%%95,50\";\n\t\t\tthis.modes[120] = \"canvas:%%25,95\";\n\t\t\tthis.modes[121] = \"canvas:%%50,95\";\n\n\t\t\tthis.modes[200] = \"canvas:1024x768\";\n\n\t\t\tthis.modes[500] = \"canvas:800x600\";\n\t\t\tthis.modes[501] = \"canvas:640x512\";\n\t\t\tthis.modes[502] = \"canvas:640x480\";\n\t\t\tthis.modes[503] = \"canvas:640x400\";\n\t\t\tthis.modes[504] = \"canvas:320x512\";\n\t\t\tthis.modes[505] = \"canvas:320x400\";\n\t\t\tthis.modes[506] = \"canvas:320x256\";\n\t\t\tthis.modes[507] = \"canvas:320x200\";\n\n\t\t\tthis.menuCreated = false;\n\t}\n\n\tgetDriver() {\n\t\treturn this.currentDriver;\n\t}\n\n\tgetMode( x ) {\n\t\tthis.init();\n\n\t\tif( ! x ) {\n\t\t\treturn getMode( this.default );\n\t\t}\n\t\treturn this.modes[ x ];\n\t}\n\n\n\tgetModes() {\n\t\treturn this.modes;\n\t}\n\n\tgetCurrentMode() {\n\t\treturn this.currentMode;\n\t}\n\n\tsetMode( x, menu ) {\n\t\tthis.init();\n\n\n\t\tif( menu ) {\n\t\t\tthis.menu = menu;\n\t\t}\n\n\t\tif( x === undefined || x === null || x === -1 || Number.isNaN( x ) ) {\n\t\t\tthis.setMode( this.default, menu );\n\t\t}\n\n\t\tvar dc = this.getDeviceConfig( x );\n\t\tif(! dc ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cm = this.currentMode;\n\t\tif( ! (cm === undefined || cm === null || cm === -1 || Number.isNaN( x ) ) ) {\n\t\t\t\tthis.endMode( this.currentMode );\n\t\t\t\tthis.menuCreated = false;\n\t\t}\n\n\t\tif( !this.menuCreated ) {\n\t\t this.menu.create();\n\t\t this.menuCreated = true;\n\t\t}\n\n\t\tdc.device.initMode( dc.config, this.menu );\n\t\tthis.sys.out =  dc.device;\n\n\t\tthis.sys.out.notifyOnClick( this.sys.m.basicmenu, \"onDeselect\" );\n\n\t\tthis.currentMode = x;\n\t\tthis.currentDriver = dc.device;\n\n\t}\n\n\tendMode() {\n\n\t\tthis.init();\n\n\t\tif( !this.currentDriver ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar dev = this.currentDriver;\n\n\t\tdev.destroy();\n\t\tthis.menu.destroy();\n\n\t\tthis.currentMode = undefined;\n\t\tthis.currentDriver = undefined;\n\n\t}\n\n\tgetDeviceConfig( x ) {\n\n\t\tif( x === undefined || x === null || x === -1 || Number.isNaN( x ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif( !this.modes[ x ] ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar tmp = this.modes[ x ].split(\":\");\n\t\tif( tmp.length < 2 ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar driver = tmp[0];\n\t\tif( !this.drivers[ driver ] ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar driverDevice = this.drivers[ driver ];\n\n\t\tvar param = tmp.splice(1);\n\n\t\treturn {\n\t\t\tdevice: driverDevice,\n\t\t\tconfig: param\n\t\t};\n\n\t}\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.cursorOn = false;\n\t\tthis.cols = 80;\n\t\tthis.rows = 30;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.hidden = false;\n\t\tthis.blinking = true;\n\t\tthis.reverse = false;\n\n\t\tthis.outColors ={};\n\n\t\tthis.fontSizeInt = 18;\n\t\tthis.fontSizeCSS = this.fontSizeInt + \"px\";\n\t\tthis.fontFamily = \"monospace\";\n\n\n\t\tthis.htmlPalette = [\n\t\t\t\"#000000\",\n\t\t\t\"#ffffff\",\n\t\t\t\"#ee2222\",\n\t\t\t\"#22ee22\",\n\t\t\t\"#2222ee\",\n\t\t\t\"#eeee22\",\n\t\t\t\"#22eeee\",\n\t\t\t\"#ee22ee\",\n\t\t\t\"#aaaaaa\",\n\t\t\t\"#777777\",\n\t\t\t\"#444444\",\n\t\t\t\"#FFAC1C\",\n\t\t\t\"#5C3317\",\n\t\t\t\"#F88379\",\n\t\t\t\"#79F883\",\n\t\t\t\"#8379F8\"\n\n\t\t];\n\n\t\tthis.outColors.txtBgColor= this.htmlPalette[0];\n\t\tthis.outColors.txtColor = this.htmlPalette[5];\n\n\t}\n\n\thtmlColor( ix ) {\n\t\treturn this.htmlPalette[ ix ];\n\t}\n\n\n\tdestroy() {\n\t\t\tthis.outDiv0.remove();\n\t\t\tthis.cvs = null;\n\t\t\tthis.cvs2 = null;\n\t\t\tthis.ctx = null;\n\t\t\tthis.ctx2 = null;\n\n\t\t\tthis.rowel = undefined;\n\t\t\tthis.cellel = undefined;\n\n\t\t\tif( this.blinkInterval ) {\n\t\t\t\tclearInterval ( this.blinkInterval );\n\t\t\t\tthis.blinkInterval = undefined;\n\t\t\t}\n\t\t}\n\n\t\tinit() {\n\t\t}\n\n\t\tgetColumCount() {\n\t\t\treturn this.cols;\n\t\t}\n\n\t\tgetRowCount() {\n\t\t\treturn this.rows;\n\t\t}\n\n\t\tgetDimensions() {\n\t\t\t\treturn [this.cols, this.rows ];\n\t\t}\n\n\t\tinitMode( m, headerElementManager ) {\n\n\t\t\tvar sys = this.sys;\n\t\t\tvar msgs = sys.init.queuedMessages;\n\n\t\t\tsys.init.inputElement = window;\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.blinking = true;\n\n\t\t\tvar tmp = m[0].split(\"x\");\n\t\t\tif( tmp.length == 2) {\n\t\t\t\tthis.rows = parseInt( tmp[1] );\n\t\t\t\tthis.cols = parseInt( tmp[0] );\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttmp = m[1].split(\"=\");\n\t\t\tif( tmp.length == 2) {\n\n\t\t\t\tthis.fontSizeInt = parseInt( tmp[1] );\n\t\t\t\tthis.fontSizeCSS = this.fontSizeInt + \"px\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.colsPercentage = (1/this.cols) * 100;\n\t\t\tthis.outColors.txtBgColor = this.htmlPalette[ 4 ];\n\t\t\tthis.outColors.txtColor = this.htmlPalette[ 1 ];\n\n\t\t\t/* Build DOM */\n\n\t\t\tthis.outDiv0 = document.createElement(\"div\");\n\t\t\tthis.outDiv1 = document.createElement(\"div\");\n\n\t\t\tthis.outEl = document.createElement(\"table\");\n\t\t\tthis.outEl.value = \"\";\n\n\t\t\tfunction getTextOfSelection () {\n\t\t\t  var range;\n\t\t\t  if (document.selection && document.selection.createRange) {\n\t\t\t    range = document.selection.createRange();\n\t\t\t    return range.toString();\n\t\t\t  }\n\t\t\t  else if (window.getSelection) {\n\t\t\t    var selection = window.getSelection();\n\t\t\t    if (selection.rangeCount > 0) {\n\t\t\t      range = selection.getRangeAt(0);\n\t\t\t\t\t\tconst documentFragment = range.cloneContents();\n\n\t\t\t\t\t\tvar rows = documentFragment.childNodes;\n\t\t\t\t\t\tvar text = \"\";\n\t\t\t\t\t\tfor( var rix=0; rix< rows.length ; rix++ ) {\n\t\t\t\t\t\t\tvar r = rows[rix];\n\t\t\t\t\t\t\tif( text != \"\" ) {\n\t\t\t\t\t\t\t\ttext += \"\\n\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar cols = r.childNodes;\n\t\t\t\t\t\t\tfor( var cix=0; cix< cols.length ; cix++ ) {\n\t\t\t\t\t\t\t\tvar c = cols[cix];\n\t\t\t\t\t\t\t\ttext += c.firstChild.data;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn text;\n\t\t\t    }\n\t\t\t    else {\n\t\t\t      return '';\n\t\t\t    }\n\t\t\t  }\n\t\t\t  else {\n\t\t\t    return '';\n\t\t\t  }\n\t\t\t}\n\n\t\t\tvar __this = this;\n\n\t\t\tthis.outDiv0.addEventListener('copy', (event) => {\n\n\t\t\t\tvar sel = getTextOfSelection();\n\n\t\t\t\tevent.clipboardData.setData(\"text/plain\", sel );\n\t\t\t  event.preventDefault();\n\n\t\t\t});\n\n\t\t\tthis.table =  this.outEl;\n\t\t\tthis.table.style.borderCollapse = \"collapse\";\n\t\t\tthis.table.style.borderSpacing = 0;\n\t\t\tthis.table.style.backgroundColor = this.outColors.txtBgColor;\n\n\t\t\tthis.table.style.resize = \"none\";\n\t\t\tthis.table.style.fontFamily = this.fontFamily;\n\t\t\tthis.table.style.fontSize = this.fontSizeCSS;\n\t\t\tthis.table.style.tableLayout = \"fixed\";\n\t\t\tthis.table.readOnly = true;\n\t\t\tthis.table.textAlign = \"center\";\n\n\t\t\tthis.rowel = [];\n\t\t\tthis.cellel = [];\n\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar tr =  document.createElement(\"tr\");\n\t\t\t\ttr.style.padding = \"0px\";\n\t\t\t\ttr.style.maxHeight = this.fontSizeInt;\n\t\t\t\ttr.style.height = this.fontSizeInt;\n\n\t\t\t\tthis.rowel.push( tr );\n\t\t\t\tthis.outEl.appendChild( tr );\n\t\t\t\tvar rowArray = [];\n\t\t\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\t\t\tvar td =  document.createElement(\"td\");\n\t\t\t\t\t//td.style.width = this.colsPercentage + \"%\";\n\t\t\t\t\t//td.style.overflow = \"hidden\";\n\t\t\t\t\t//console.log( td.style.width );\n\t\t\t\t\ttd.style.padding = \"0px\";\n\t\t\t\t\ttd.style.color = this.outColors.txtColor;\n\t\t\t\t\ttd.style.backgroundColor = undefined;\n\t\t\t\t\ttd.style.textOverflow = \"\";\n\t\t\t\t\ttd.style.whiteSpace= \"nowrap\";\n\t\t\t\t\ttd.style.overflow = \"hidden\";\n\t\t\t\t\ttd.style.maxWidth = this.fontSizeInt;\n\t\t\t\t\ttd.style.maxHeight = this.fontSizeInt;\n\t\t\t\t\t//td.style.width = this.fontSize;\n\t\t\t\t\ttd.style.height = this.fontSizeInt;\n\n\t\t\t\t\ttd.innerHTML = \"&nbsp;\";\n\n\t\t\t\t\trowArray.push( td );\n\t\t\t\t\ttr.appendChild( td );\n\t\t\t\t}\n\t\t\t\tthis.cellel.push( rowArray );\n\t\t\t}\n\n\n\t\t\tdocument.body.appendChild( this.outDiv0 );\n\n\t\t\tthis.outDiv0.style.display = \"table\";\n\t\t\tthis.outDiv0.style.width = \"99%\";\n\t\t\tthis.outDiv0.style.height = \"99%\";\n\t\t\tthis.outDiv0.style.position = \"absolute\";\n\t\t\tthis.outDiv0.style.zIndex = \"10000\";\n\n\t\t\tthis.outDiv1.style.display = \"table-cell\";\n\t\t\tthis.outDiv1.style.verticalAlign = \"middle\";\n\n\t\t\tthis.table.style.marginLeft = \"auto\";\n\t\t\tthis.table.style.marginRight = \"auto\";\n\n\t\t\tthis.outDiv0.appendChild( this.outDiv1 );\n\n\t\t\tif( headerElementManager ) {\n\t\t\t\tthis.headerElementManager = headerElementManager;\n\t\t\t\tthis.outDiv1.appendChild( this.headerElementManager.get() );\n\t\t\t\t//this.headerElementManager.setDimensions( this.fontSizeInt * this.cols, 480 );\n\n\t\t\t\tthis.headerElementManager.enable();\n\t\t\t}\n\n/*\t\t\tif( this.sys.headerElement ) {\n\t\t\t\tthis.outDiv1.appendChild( this.sys.headerElement );\n}*/\n\n\t\t\tthis.outDiv1.appendChild( this.outEl );\n\n\t\t\tif( headerElementManager ) {\n\n\t\t\t\tthis.headerElementManager.setDimensions( this.outEl.clientWidth, 480 );\n\n\t\t\t}\n\n\n\t\t\tthis.outEl.focus( );\n\n\t\t\t this.dirty = true;\n\t\t\t this.dirtyFlags = {\n\t\t\t\t bg: true,\n\t\t\t\t color: true\n\t\t\t }\n\n\t\t\tvar _this = this;\n\t\t\tthis.blinkInterval = \t setInterval(function()  {\n\t\t\t\t \t_this._int_blink();\n\t\t\t\t}, 500);\n\n\t\t\t\tfor( var i=0; i<msgs.length; i++) {\n\t\t\t\t\tthis.writeln( msgs[ i ]);\n\t\t\t\t}\n\n\t\t\t this.sys.log(\"TBCON Ready.\");\n\t}\n\n\tnative( operation ) {\n\t\tthrow \"@Operation \" + operation.action + \" not supported on TABLECON\";\n\t}\n\n\tblinkMode( mode ) {\n\t\tthis.blinking = mode;\n\t}\n\n\tnotifyOnClick() {\n\n\t}\n\n\thasPixels() {\n\t\treturn false;\n\t}\n\n\t_int_updateArea( srccells, x0, y0, x1, y1 ) {\n\n\n\t\tfor( var x=x0; x<=x1; x++) {\n\t\t\tfor( var y=y0; y<=y1; y++) {\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tvar src = srccells[ y-y0 ][ x-x0 ];\n\n\t\t\t\tif( src.txt == \" \") {\n\t\t\t\t\t\tcell.innerHTML = \"&nbsp;\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\tcell.textContent = src.txt;\n\t\t\t\t}\n\t\t\t\tcell.style.color =  this.htmlPalette[ src.fg ];\n\t\t\t\tcell.style.backgroundColor = this.htmlPalette[ src.bg ];\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\tupdate( p, list ) {\n\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tthis.x = p.cx;\n\t\tthis.y = p.cy;\n\t\tif(\n\t\t\tthis.x<0 || this.y<0 ||\n\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t) {\n\t\t\tconsole.log(\"ouch\");\n\n\t\t}\n\n\t\tthis.outColors.txtBgColor= this.htmlPalette[ p.bg ];\n\t\tthis.outColors.txtColor = this.htmlPalette[ \tp.fg];\n\n\t\tfor( var i=0; i< list.length; i++) {\n\n\t\t\tvar el = list[ i ];\n\t\t\tthis._int_updateArea( el.cells, el.x1, el.y1, el.x2, el.y2 );\n\n\t\t}\n\n\n\t}\n\n\tupdateAll( p, srccells ) {\n\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tthis.x = p.cx;\n\t\tthis.y = p.cy;\n\n\t\tif(\n\t\t\tthis.x<0 || this.y<0 ||\n\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t) {\n\t\t\tconsole.log(\"ouch\");\n\n\t\t}\n\t\tthis.outColors.txtBgColor= this.htmlPalette[ p.bg ];\n\t\tthis.outColors.txtColor = this.htmlPalette[ \tp.fg];\n\n\t\tthis._int_updateArea( srccells, 0,0, this.cols -1, this.rows -1 );\n\n\t}\n\n\n\thide() {\n\t\tif( !this.hidden ) {\n\t\t\tthis.outDiv0.hidden = true;\n\t\t\tthis.hidden = true;\n\t\t}\n\t}\n\n\tshow() {\n\t\tif( this.hidden ) {\n\t\t\tthis.outDiv0.hidden = false;\n\t\t\tthis.hidden = false;\n\t\t}\n\t}\n\n\n\tgetElement() {\n\t\treturn null;\n\t}\n\n\n\t_int_blinkOff() {\n\n\t\tif( !this.cursorOn ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cursorOn = false;\n\n\t\tvar cell = this.cellel[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tcell.style.color = this.outColors.txtColor;\n\t\tcell.style.backgroundColor = this.outColors.txtBgColor;\n\n\n\t}\n\n\t_int_blink() {\n\n\t\tif( ! this.blinking ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cell;\n\t\ttry {\n\t\t\t\tcell = this.cellel[ this.y ][ this.x ];\n\t\t}\n\t\tcatch {\n\t\t\tcell = null;\n\t\t}\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"Blink exception: Cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cursorOn = !this.cursorOn;\n\n\t\tif( !this.cursorOn ) {\n\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\tcell.style.backgroundColor = this.outColors.txtBgColor;\n\t\t}\n\t\telse {\n\t\t\tcell.style.backgroundColor = this.outColors.txtColor;\n\t\t\tcell.style.color = this.outColors.txtBgColor;\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tcell.innerHTML = \"&nbsp;\";\n\t\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\t\tcell.style.backgroundColor = this.outColors.txtBgColor;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\t__int_nl() {\n\t\t\tthis.x = 0;\n\t\t\tthis.y ++;\n\t\t\tif( this.y >= this.rows ) {\n\t\t\t\tthis.__int_scrollDown();\n\t\t\t\tthis.y = this.rows -1;\n\t\t\t}\n\n\t}\n\n\n\twriteln( str ) {\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\t\t\t//console.log( \"writeln\" + str );\n\n\t\t\tfor( var i=0; i<str.length; i++) {\n\t\t\t\tvar c = str.substr(i,1);\n\t\t\t\tthis.__int_write_direct_ch( c );\n\t\t\t}\n\t\t\tthis.__int_nl();\n\t}\n\n\n\t__int_write_direct_ch( ch ) {\n\n\t\tvar cell = this.cellel[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tif( ch == \" \") {\n\t\t\t\tcell.innerHTML = \"&nbsp\";\n\t\t}\n\t\telse {\n\t\t\tcell.innerHTML = ch;\n\t\t}\n\n\t\tif( !this.reverse  ) {\n\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\tcell.style.backgroundColor = undefined;\n\t\t}\n\t\telse {\n\t\t\tcell.style.backgroundColor = this.outColors.txtColor;\n\t\t\tcell.style.color = this.outColors.txtBgColor;\n\t\t}\n\n\t\tthis.x++;\n\t\tif( this.x >= this.cols ) {\n\t\t\tthis.x = 0;\n\t\t\tthis.__int_nl();\n\t\t}\n\t}\n\n\n\n\t__int_scrollDown() {\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tfor( var y=0; y<this.rows-1; y++) {\n\t\t\t\tvar cell = this.cellel[ y ][ x ];\n\t\t\t\tvar cellyp1 = this.cellel[ y+1 ][ x ];\n\n\t\t\t\tcell.textContent = cellyp1.textContent;\n\t\t\t\tcell.style.color = cellyp1.style.color;\n\t\t\t\tcell.style.backgroundColor = cellyp1.style.backgroundColor;\n\n\n\t\t\t}\n\t\t}\n\n\t\tvar y2 = this.rows-1;\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tvar cell = this.cellel[ y2 ][ x ];\n\t\t\tcell.innerHTML = \"&nbsp;\";\n\t\t\tif( !this.reverse  ) {\n\t\t\t\tcell.style.color = this.outColors.txtColor;\n\t\t\t\tcell.style.backgroundColor = undefined;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcell.style.backgroundColor = this.outColors.txtColor;\n\t\t\t\tcell.style.color = \"rgba(0,255,0,0.0)\";\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport { KERNALMODULE as default};\n","import  SymbolsTileImage   from    './symbols.js';\nimport  SimpleTiles   from    './simpletiles.js';\n\nclass KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t\tthis.cursorOn = false;\n\t\tthis.hidden = false;\n\t\tthis.blinking = true;\n\t\tthis.cursorMode = \"insert\";\n\t\tthis.bmFontEnable = true;\n\t\tthis.colors ={};\n\n\t\tthis.palette = [\n\t\t\t\"#000000\",\n\t\t\t\"#ffffff\",\n\t\t\t\"#ee2222\",\n\t\t\t\"#22aa22\",\n\t\t\t\"#1111cc\",\n\t\t\t\"#eeee22\",\n\t\t\t\"#22eeee\",\n\t\t\t\"#ee22ee\",\n\t\t\t\"#bbbbbb\",\n\t\t\t\"#777777\",\n\t\t\t\"#444444\",\n\t\t\t\"#FFAC1C\",\n\t\t\t\"#5C3317\",\n\t\t\t\"#F88379\",\n\t\t\t\"#79F883\",\n\t\t\t\"#8379F8\"\n\n\t\t];\n\n\n\n\t\tvar pad2 = function( hs ) {\n\t\t\tvar rv = hs;\n\t\t\twhile ( rv.length < 2 ) {\n\t\t\t\trv = \"0\" + rv;\n\t\t\t}\n\t\t\treturn rv;\n\t\t}\n\n\t\tvar pl = this.palette.length;\n\t\tfor( var i=0; i < pl; i++) {\n\t\t\tvar htmlCol = this.palette[i];\n\t\t\tvar r = pad2( Math.floor(parseInt(htmlCol.substr(1,2),16) / 2).toString(16));\n\t\t\tvar g = pad2( Math.floor(parseInt(htmlCol.substr(3,2),16) / 2).toString(16));\n\t\t\tvar b = pad2( Math.floor(parseInt(htmlCol.substr(5,2),16) / 2).toString(16));\n\t\t\tvar newcolor = \"#\" + r + g + b;\n\t\t\tthis.palette.push( newcolor );\n\n\t\t}\n\n\n\t\tthis.bmPalette = [];\n\t\tfor( var i=0; i<this.palette.length; i++) {\n\t\t\tvar htmlCol = this.palette[i];\n\t\t\tvar r = parseInt(htmlCol.substr(1,2),16)\n\t\t\tvar g = parseInt(htmlCol.substr(3,2),16)\n\t\t\tvar b = parseInt(htmlCol.substr(5,2),16)\n\t\t\tthis.bmPalette.push(\n\t\t\t\t{\n\t\t\t\t\tr:r,g:g,b:b\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\n\n\t\tthis.defaultTextMode();\n\n\t\tvar __this = this;\n\t\tvar image = new Image();\n\t\timage.onload = function ( evt ) {\n\t\t\t__this._postLoadFontImage();\n\t\t}\n\t\timage.src = new SymbolsTileImage().getBlobURL();\n\n\t\tthis.fimage = image;\n\n\t\tvar UNICODE=0;\n\t\tvar CUSTOM=1;\n\t\tvar GLYPHS0=2;\n\t\tvar GLYPHS1=3;\n\t\tvar GLYPHS2=4;\n\t\tvar GLYPHS3=5;\n\n\t\tthis.GLYPHSADDR = [ NaN, NaN, 0, 128, 256 , 384];\n\n\t\tthis.characterbank0 = GLYPHS0;\n\t\tthis.characterbank1 = GLYPHS1;\n\t\tthis.characterbank2 = GLYPHS2;\n\t\tthis.characterbank3 = UNICODE;\n\n\t\tthis.bankDefaultBaseAddr = 256;\n\t\tthis.bankBaseAddr = this.bankDefaultBaseAddr;\n\n\n\t}\n\n\t_postLoadFontImage() {\n\n\n\t\tthis.bfont = new SimpleTiles( this.fimage, 12, 20, { r:0, g:0, b:0 } );\n\n\t}\n\n\thtmlColor( ix ) {\n\t\treturn this.palette[ ix ];\n\t}\n\n\n\tdestroy() {\n\t\tthis.outDiv0.remove();\n\t\tthis.cvs = null;\n\t\tthis.cvs2 = null;\n\t\tthis.cvsCursor = null;\n\t\tthis.ctx = null;\n\t\tthis.ctx2 = null;\n\t\tthis.ctxCursor = null;\n\t\tthis.cache = null;\n\n\t\tthis.cells = [];\n\n\t\tif( this.blinkInterval ) {\n\t\t\tclearInterval ( this.blinkInterval );\n\t\t\tthis.blinkInterval = undefined;\n\t\t}\n\t}\n\n\tdefaultTextMode() {\n\t\tthis.cols = 80;\n\t\tthis.rows = 30;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\n\t\tthis.fontSize = \"20\";  //16x10, 18x11, 20x12\n\n\t\tthis.fontSizeCSS = this.fontSize + \"px\";\n\t\tthis.fontSizeIntW = 12 ; //Math.floor(parseInt( this.fontSize ) * .7)-1;\n\t\tthis.fontSizeIntH = parseInt( this.fontSize );\n\t\tthis.fontFamily = \"monospace\";\n\n\t\tvar oc = this.colors;\n\t\toc.bg = 0;\n\t\toc.fg = 5;\n\n\t\tthis.colors.bgHTML = this.palette[ oc.bg ];\n\t\tthis.colors.fgHTML = this.palette[ oc.fg ];\n\t\tthis.colors.bgRGB = this.bmPalette[ oc.bg ];\n\t\tthis.colors.fgRGB = this.bmPalette[ oc.fg ];\n\n\t}\n\n\tinit() {\n\t}\n\n\tinitMode( config, headerElementManager ) {\n\n\t\t\tvar sys = this.sys;\n\t\t\tvar msgs = sys.init.queuedMessages;\n\n\t\t\tthis.cursorOn = false;\n\t\t\tthis.blinking = true;\n\n\t\t\tvar w;\n\t\t\tvar h;\n\t\t\tif( config[0].indexOf(\"x\") > 0) {\n\t\t\t\tvar tmp = config[0].split(\"x\");\n\t\t\t\tw = parseInt( tmp[0] );\n\t\t\t\th = parseInt( tmp[1] );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar ww = window.innerWidth;\n\t\t\t\tvar wh = window.innerHeight;\n\n\t\t\t\tif( config[0].startsWith( \"%%\" )) {\n\t\t\t\t\tvar percentages = config[0].substr( 2 ).split(\",\");\n\t\t\t\t\tvar percentagex = percentages[0] / 100;\n\t\t\t\t\tvar percentagey = percentages[1] / 100;\n\t\t\t\t\tw = Math.floor(ww * percentagex);\n\t\t\t\t\th = Math.floor(wh * percentagey);\n\t\t\t\t}\n\t\t\t\telse if( config[0].startsWith( \"%\" )) {\n\t\t\t\t\tvar percentage = config[0].substr( 1 );\n\t\t\t\t\tpercentage = percentage / 100;\n\t\t\t\t\tw = Math.floor(ww * percentage);\n\t\t\t\t\th = Math.floor(wh * percentage);\n\t\t\t\t}\n\n\n\t\t\t}\n\n\n\n\t\t\tthis.cols = Math.floor( w / this.fontSizeIntW );\n\t\t\tthis.rows = Math.floor( h / this.fontSizeIntH );\n\n\t\t\t/* adjust w,h to fit exactly so many cols and rows */\n\t\t\tw = this.cols * this.fontSizeIntW;\n\t\t\th = this.rows * this.fontSizeIntH;\n\n\t\t\tvar fsw = this.fontSizeIntW;\n\t\t\tvar fsh = this.fontSizeIntH;\n\n\t\t\tthis.width = w;\n\t\t\tthis.height = h;\n\n\t\t\tconsole.log(\"Reinit with \" , w, h);\n\t\t\tconsole.log(\" colsXrows \" , this.cols, this.rows);\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.blinking = true;\n\n\t\t\tvar oc = this.colors;\n\t\t\toc.bg = 0;\n\t\t\toc.fg = 5;\n\t\t\toc.bgHTML = this.palette[ oc.bg ];\n\t\t\toc.fgHTML = this.palette[ oc.fg ];\n\n\t\t\tsys.init.inputElement = document.body;\n\n\t\t\tthis.outDiv0 = document.createElement(\"div\");\n\t\t\tthis.outDiv1 = document.createElement(\"div\");\n\t\t\tthis.center = document.createElement(\"center\");\n\n\t\t\tthis.cvs = document.createElement(\"canvas\");\n\t\t\tthis.ctx = this.cvs.getContext('2d', {alpha: false});\n\t\t\tthis.ctx.strokeStyle = '#ffffff';\n\t\t\tthis.cX = 0;\n\t\t\tthis.cY = 0;\n\t\t\t//this.cvs = this.outEl;\n\n\t\t\tthis.cvs2 = document.createElement(\"canvas\"); //only used for scrolling, really needed??\n\t\t\tthis.ctx2 = this.cvs2.getContext('2d');\n\n\t\t\tthis.cvsCursor = document.createElement(\"canvas\");\n\t\t\tthis.ctxCursor = this.cvsCursor.getContext('2d');\n\n\t\t\tthis.cache = [];\n\t\t\tthis.updCtxImageData = { synched: false }\n\n\t\t\tthis.cvs.width = w;\n\t\t\tthis.cvs.height = h;\n\t\t\tthis.cvs2.width = w;\n\t\t\tthis.cvs2.height = h;\n\t\t\tthis.cvsCursor.width = fsw;\n\t\t\tthis.cvsCursor.height = fsh;\n\n\t\t\tthis.offsets = [];\n\n\t\t\tvar ctx = this.ctx;\n  \t\tctx.font =  this.fontSizeCSS + \" \" + this.fontFamily;\n\t\t\t//ctx.font =  \"20px Verdana\";\n \t\t  ctx.textBaseline = \"bottom\";\n\t\t\t//ctx.fontStretch=\"expanded\";\n\n\t\t\tvar str = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890@+_!#%&/()=?*-:;,.'\\\"\";\n\t\t\tvar fsid2 = this.fontSizeIntW / 2;\n\t\t\tfor (const c of str) {\n\t\t\t\tvar tmp3 =  this.ctx.measureText( c )  ;\n\t\t\t\tvar tmp2 =  tmp3.width  ;\n\t\t\t\tvar tmp1 =  (tmp2 / 2) ;\n\t\t\t\tvar tmp0 =  fsid2 - tmp1 ;\n\t\t\t\tvar tmp = Math.floor( tmp0 );\n\t\t\t\tif( tmp<0 ) { tmp = 0; }\n\t\t\t\tthis.offsets[ c ] = tmp;\n \t\t }\n\n\t\t \tthis.oIndicatorChar = \"\\u2595\";\n\t\t  this.oIndicatorSize = this.ctx.measureText( this.oIndicatorChar )  ;\n\t\t\tthis.oIndicatorOffset = Math.floor( fsid2 - (this.oIndicatorSize.width / 2));\n\n\t\t\tthis.cells = [];\n\n\t\t\tvar cols = this.colors;\n\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tvar rowArray = [];\n\t\t\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\t\t\trowArray.push( { txt: \" \", fg: cols.fg, bg: cols.bg } );\n\t\t\t\t}\n\t\t\t\tthis.cells.push( rowArray );\n\t\t\t}\n\n\t\t\tdocument.body.appendChild( this.outDiv0 );\n\n\t\t\tthis.outDiv0.style.display = \"table\";\n\t\t\tthis.outDiv0.style.width = \"99%\";\n\t\t\tthis.outDiv0.style.height = \"99%\";\n\t\t\tthis.outDiv0.style.position = \"absolute\";\n\t\t\tthis.outDiv0.style.zIndex = \"10000\";\n\n\t\t\tthis.outDiv1.style.display = \"table-cell\";\n\t\t\tthis.outDiv1.style.verticalAlign = \"middle\";\n\n\t\t\tthis.cvs.style.marginLeft = \"auto\";\n\t\t\tthis.cvs.style.marginRight = \"auto\";\n\n\n\t\t\tthis.outDiv0.appendChild( this.outDiv1 );\n\t\t\tthis.outDiv1.appendChild( this.center );\n\t\t\tif( headerElementManager ) {\n\t\t\t\tthis.headerElementManager = headerElementManager;\n\t\t\t\tthis.center.appendChild( this.headerElementManager.get() );\n\t\t\t\tthis.headerElementManager.setDimensions( w, h );\n\n\t\t\t\tthis.headerElementManager.enable();\n\t\t\t}\n\t\t\tthis.center.appendChild( this.cvs );\n\n\n\t\t\tthis.cvs.focus( );\n\n\n \t\t  var _this = this;\n\n\t\t\tthis.blinkInterval = setInterval(function()  {\n\n\t\t\t\t \t_this._int_blink();\n\t\t\t\t}, 300);\n\n\t\t\t\tfor( var i=0; i<msgs.length; i++) {\n\t\t\t\t\tthis.writeln( msgs[ i ]);\n\t\t\t\t}\n\n\t\t\t this.clear();\n\n\n\t\t\t this.sys.log(\"CANVASCON Ready.\");\n\t}\n\n\n\tnotifyOnClick( handler, myFunction ) {\n\n\t\tthis.cvs.addEventListener( \"click\", function() {\n\t\t\thandler[myFunction]();\n\t\t} );\n\n\t}\n\n\thideInner() {\n\t\tthis.cvs.hidden = true;\n\t}\n\nshowInner() {\n\t\tthis.cvs.hidden = false;\n\t}\n\n\thide() {\n\t\tthis.init();\n\t\tif( !this.hidden ) {\n\t\t\tthis.outDiv0.hidden = true;\n\t\t\tthis.hidden = true;\n\t\t}\n\t}\n\n\tshow() {\n\t\tthis.init();\n\t\tif( this.hidden ) {\n\t\t\tthis.outDiv0.hidden = false;\n\t\t\tthis.hidden = false;\n\t\t}\n\t}\n\n\n\tgetElement() {\n\t\treturn null;\n\t}\n\n\n\tblinkMode( mode ) {\n\t\tthis.blinking = mode;\n\t}\n\n\n\t_int_blinkOff() {\n\n\n\t\tif( !this.cursorOn ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\n\t\tvar x0 = (fsw * this.x);\n\t\tvar y0 = fsh * (this.y );\n\n\t\tvar ctx = this.ctx;\n\n\t\tthis.ctx.drawImage(this.cvsCursor, x0, y0);\n\n\t\tthis.cursorOn = false;\n\n\t}\n\n\t_int_storeset_color( fg, bg ) {\n\n\t\tthis.oldfg = fg;\n\t\tthis.oldbg = bg;\n\n\t\tvar oc = this.colors;\n\t\toc.fg = fg;\n\t\toc.bg = bg;\n\t\toc.fgHTML = this.palette[ oc.fg ];\n\t\toc.bgHTML = this.palette[ oc.bg ];\n\t\toc.fgRGB = this.bmPalette[ oc.fg ];\n\t\toc.bgRGB = this.bmPalette[ oc.bg ];\n\n\t}\n\n\n\t_int_restore_color() {\n\n\t\tvar oc = this.colors;\n\t\toc.fg = this.oldfg;\n\t\toc.bg = this.oldbg;\n\t\toc.fgHTML = this.palette[ oc.fg ];\n\t\toc.bgHTML = this.palette[ oc.bg ];\n\t\toc.fgRGB = this.bmPalette[ oc.fg ];\n\t\toc.bgRGB = this.bmPalette[ oc.bg ];\n\n\t}\n\n\t_int_blink() {\n\n\t\tif( ! this.blinking ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar currentCursorIsOn = this.cursorOn;\n\n\t\tthis.cursorOn = !this.cursorOn;\n\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\n\t\tvar x0 = (fsw * this.x);\n\t\tvar y0 = (fsh * this.y);\n\t\tvar oc = this.colors;\n\n\t\tvar ctx = this.ctx;\n\t\tvar cell = this.cells[ this.y][this.x ];\n\n\n\t\tif(  this.cursorOn ) {\n\n\t\t\t\t/* first we backup underneath cursor */\n\t\t\t\tthis.ctxCursor.drawImage(this.cvs, x0, y0, fsw, fsh, 0, 0, fsw, fsh);\n\n\t\t\t\t/* we decide the colors */\n\t\t\t\tvar col = this.colors.fgHTML;\n\t\t\t\tvar index = this.colors.fg;\n\t\t\t\tvar index2 = this.colors.bg;\n\n\t\t\t\t/*if cell.bg == cell.fg, use instead black on white or white on black */\n\t\t\t\tif( cell.fg == cell.bg ) {\n\t\t\t\t\tif( cell.fg == 0 ) {\n\t\t\t\t\t\tindex = 1;\n\t\t\t\t\t\tindex2 = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\tindex2 = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t/*if bg!=fg use cell colors*/\n\t\t\t\t\tindex = cell.fg;\n\t\t\t\t\tindex2 = cell.bg;\n\t\t\t\t}\n\n\t\t\t\tthis.paintCursor( x0, y0, cell.txt, index, index2, this.cursorMode == \"overwrite\" );\n\n\t\t\t\treturn;\n\n\t\t}\n\t\telse {\n\n\t\t\t//cursor off\n\t\t\tthis.ctx.drawImage(this.cvsCursor, x0, y0);\n\n\t\t}\n\n\t}\n\n\t_int_updateArea( srccells, x0, y0, x1, y1 ) {\n\n\t\tvar ctx = this.ctx;\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\t\tvar oc = this.colors;\n\n\t\tvar x; var y;\n\t\ttry {\n\n\t\tfor( y=y0; y<=y1; y++) {\n\t\t\tvar yy = fsh * y;\n\t\t\tvar offX =x0 * fsw;\n\t\t\t//for( x=x1; x>=x0; x--) {\n\t\t\tfor( x=x0; x<=x1; x++) {\n\t\t\t\tvar cell = this.cells[ y ][ x ];\n\t\t\t\tvar src = srccells[ y-y0 ][ x-x0 ];\n\t\t\t\tvar ch = src.txt;\n\n\t\t\t\toc.bg = src.bg;\n\t\t\t\toc.fg = src.fg;\n\n\t\t\t\toc.bgHTML = this.palette[ src.bg ];\n\t\t\t\toc.fgHTML = this.palette[ src.fg ];\n\t\t\t\toc.bgRGB = this.bmPalette[ src.bg ];\n\t\t\t\toc.fgRGB = this.bmPalette[ \tsrc.fg ];\n\n\t\t\t\tcell.txt = ch;\n\t\t\t\tcell.fg = src.fg;\n\t\t\t\tcell.bg = src.bg;\n\n\t\t\t\tthis._int_paintchar( offX , yy , ch );\n\t\t\t\toffX += fsw;\n\t\t\t}\n\t\t}\n\t} catch ( e ) {\n\t\tconsole.log(\"x= \" + x + \" y= \" + y);\n\t\tconsole.log(\"x0=\", x0, \"y0=\",y0, \"x1=\",x1,\"y1=\",y1);\n\t\tconsole.log(e);\n\t}\n\n\t}\n\n\tpaintCursor( x, y, ch , col1, col2, mode ) {\n\t\tthis._int_storeset_color( col2, col1 );\n\t\tthis._int_paintchar( x, y, ch );\n\t\tif(  mode ) {\n\t\t\tthis._int_drawIndicator( x, y, ch );\n\t\t}\n\t\tthis._int_restore_color();\n\t}\n\n\n\t_int_drawIndicator( x, y, c ) {\n\n\t\tvar ctx = this.ctx;\n\n\t\tctx.font =  this.fontSizeCSS + \" \" + this.fontFamily;\n\t\tctx.textBaseline = \"top\";\n\n\t\tctx.fillStyle = this.colors.fgHTML\n\t\tctx.fillRect(  x,y + (4*this.fontSizeIntH)/5, this.fontSizeIntW, (this.fontSizeIntH)/5 );\n\n\t}\n\n\tsetCharacterBank( addr, mode ) {\n\t\tthis.characterbank[addr] = mode;\n\t}\n\n\t_int_paintchar( x, y, ch ) {\n\n\t\t\tthis.updCtxImageData.synched = false;\n\n\t\t\tvar oc = this.colors;\n\t\t\tvar index = ch + \":\"+oc.bg+\":\"+oc.fg;\n\t\t\tvar cacheel = this.cache[ index ];\n\t\t\tvar fsw = this.fontSizeIntW;\n\t\t\tvar fsh = this.fontSizeIntH;\n\n\t\t\tif( ! cacheel ) {\n\n\t\t\t\tvar cvs = document.createElement(\"canvas\");\n\n\t\t\t\tvar code = ch.charCodeAt(0);\n\n/*\n\twhat is this.bmFontEnable ??\n\n\t\tvar UNICODE=0;\n\t\tvar CUSTOM=1;\n\t\tvar GLYPHS0=2;\n\t\tvar GLYPHS1=3;\n\t\tvar GLYPHS2=4;\n\t\tvar GLYPHS3=5;\n\t\tthis.characterbank0 = GLYPHS0;\n\t\tthis.characterbank1 = GLYPHS1;\n\t\tthis.characterbank2 = GLYPHS2;\n\t\tthis.characterbank3 = GLYPHS3;\n\n\t\tthis.bankDefaultBaseAddr = 256;\n\t\tthis.bankBaseAddr = this.bankDefaultBaseAddr;\n\n*/\n\n\t\t\t\tvar GLYPHS0=2;\n\t\t\t\tvar GLYPHS1=3;\n\t\t\t\tvar GLYPHS2=4;\n\t\t\t\tvar GLYPHS3=5;\n\n\t\t\t\tvar bitmapchar = false;\n\t\t\t\tvar glyphs;\n\t\t\t\tvar bitmapchar0 = ( code >= this.bankBaseAddr && code < (this.bankBaseAddr + 512));\n\t\t\t\tvar charAddr;\n\t\t\t\tvar relCode;\n\t\t\t\t//var bank;\n\n\n\t\t\t\tif( bitmapchar0  ) {\n\n\t\t\t\t\tif ( code < (this.bankBaseAddr + 128) && this.characterbank0 >= GLYPHS0) {\n\t\t\t\t\t\t bitmapchar = true;\n\t\t\t\t\t\t //bank = 0;\n\t\t\t\t\t   //glyphs = this.characterbank0;\n\t\t\t\t\t\t// bankaddr = 0;\n\t\t\t\t\t\t// if( )\n\t\t\t\t\t\t// charAddr = code - this.bankBaseAddr;\n\n\t\t\t\t\t\trelCode = code - (this.bankBaseAddr );\n\t\t\t\t\t\tcharAddr = this.GLYPHSADDR[ this.characterbank0 ] + relCode;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( (code >= this.bankBaseAddr + 128) && code < (this.bankBaseAddr + 256) && this.characterbank1 >= GLYPHS0) {\n\t\t\t\t\t\tbitmapchar = true;\n\t\t\t\t\t\t//bank = 1;\n\t\t\t\t\t\t//glyphs = this.characterbank1;\n\t\t\t\t\t\t//charAddr = code - (this.bankBaseAddr);\n\n\t\t\t\t\t\trelCode = code - (this.bankBaseAddr + 128);\n\t\t\t\t\t\tcharAddr = this.GLYPHSADDR[ this.characterbank1 ] + relCode;\n\n/*\n\t\t\t\t\t\texample:\n\t\t\t\t\t\t\tcode = 130\n\t\t\t\t\t\t\tthis.characterbank1 = GLYPHS2;\n\n\t\t\t\t\t\t\tcharBaseAddr = 130-128 = 2\n\t\t\t\t\t\t\tcharAddr = addr( GLYPHS2 ) + 2;\n*/\n\t\t\t\t\t}\n\t\t\t\t\telse if ( (code >= this.bankBaseAddr + 256 ) && code < (this.bankBaseAddr + 384) && this.characterbank2 >= GLYPHS0) {\n\t\t\t\t\t\tbitmapchar = true;\n\t\t\t\t\t\t//glyphs = this.characterbank2;\n\t\t\t\t\t\trelCode = code - (this.bankBaseAddr + 256);\n\t\t\t\t\t\tcharAddr = this.GLYPHSADDR[ this.characterbank2 ] + relCode;\n\t\t\t\t\t}\n\t\t\t\t\telse if ( (code >= this.bankBaseAddr + 384 ) && this.characterbank3 >= GLYPHS0) {\n\t\t\t\t\t\tbitmapchar = true;\n\t\t\t\t\t\t//glyphs = this.characterbank3;\n\t\t\t\t\t\trelCode = code - (this.bankBaseAddr + 384);\n\t\t\t\t\t\tcharAddr = this.GLYPHSADDR[ this.characterbank3 ] + relCode;\n\t\t\t\t\t}\n\n\t\t\t\t\t//bankaddr =\n\n\t\t\t\t}\n\n\t\t\t\tif( code > 256 && !bitmapchar ) {\n\t\t\t\t\tvar tmp3 =  this.ctx.measureText( ch )  ;\n\t\t\t\t\tvar tmpw =  Math.floor( tmp3.width ) ;\n\t\t\t\t\tif( tmpw > fsw ) {\n\t\t\t\t\t\tfsw = tmpw;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcvs.width = fsw;\n\t\t\t\tcvs.height = fsh;\n\n\t\t\t\tvar ctx = cvs.getContext('2d', {alpha: false});\n\n\t\t\t\tif( bitmapchar ) {\n\n\t\t\t\t\tvar grid = this.bfont.getCharData( charAddr ); //code-this.bankBaseAddr );\n\n\t\t\t\t\tvar imgdata = ctx.getImageData(0, 0, fsw, fsh );\n\t\t\t\t\tvar sd  = imgdata.data;\n\n\t\t\t\t\tvar offset;\n\t\t\t\t\tvar yoffset = 0, xoffset=0;\n\t\t\t\t\tvar yofflen = 4 * fsw;\n\t\t\t\t\tvar xofflen = 4;\n\n\t\t\t\t\tvar bgc = this.colors.bgRGB;\n\t\t\t\t\tvar fgc = this.colors.fgRGB;\n\n \t\t\t\t\tfor( var yy=0; yy<fsh; yy++) {\n\n\t\t\t\t\t\txoffset = 0;\n \t\t\t\t\t\tfor( var xx=0; xx<fsw; xx++) {\n\t\t\t\t\t\t\tvar pix = grid[yy][xx];\n\t\t\t\t\t\t\toffset = xoffset + yoffset;\n\n\t\t\t\t\t\t\tif( pix ) {\n\t\t\t\t\t\t\t\tsd[ offset + 0] = fgc.r;\n\t\t\t\t\t\t\t\tsd[ offset + 1] = fgc.g;\n\t\t\t\t\t\t\t\tsd[ offset + 2] = fgc.b;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tsd[ offset + 0] = bgc.r;\n\t\t\t\t\t\t\t\tsd[ offset + 1] = bgc.g;\n\t\t\t\t\t\t\t\tsd[ offset + 2] = bgc.b;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsd[ offset + 3] = 255;\n\t\t\t\t\t\t\txoffset += xofflen;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tyoffset += yofflen;\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.putImageData( imgdata, 0, 0);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tctx.font =  this.fontSizeCSS + \" \" + this.fontFamily;\n\t\t\t\t\tctx.textBaseline = \"top\";\n\n\t\t\t\t\tvar off = 0;\n\t\t\t\t\tif( this.offsets[ ch ] ) {\n\t\t\t\t\t\toff = this.offsets[ ch ];\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.fillStyle = this.colors.bgHTML;\n\t\t\t\t\tctx.fillRect(  0,0, fsw, fsh);\n\n\t\t\t\t\tctx.fillStyle = this.colors.fgHTML;\n\t\t\t\t\tctx.fillText( ch , off, 0);\n\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache[ index ] = { ctx: ctx, cvs: cvs, w: fsw } ;\n\t\t\t\tcacheel = this.cache[ index ];\n\n\t\t\t}\n\n\t\t\tthis.ctx.drawImage( cacheel.cvs, x, y );\n\t\t}\n\n\t\top_gcolor( params ) {\n\t\t\t\tvar htmlCol = this.palette[ params.c ];\n\t\t\t\tvar ctx = this.ctx;\n\t\t\t\tctx.strokeStyle = htmlCol;\n\n\t\t}\n\n\n\t\top_line( params ) {\n\n\t\t\tthis.updCtxImageData.synched = false;\n\n\t\t\tvar ctx = this.ctx;\n\n\t\t\tvar x0 =params.x0;\n\t\t\tvar y0 =params.y0;\n\t\t\tif( x0 < 0) {\n\t\t\t\tx0=this.cX;\n\t\t\t}\n\t\t\tif( y0 < 0) {\n\t\t\t\ty0=this.cY;\n\t\t\t}\n\n\t\t\tctx.beginPath(); // Start a new path\n\t\t\tctx.moveTo( x0,  y0); // Move the pen to (30, 50)\n\t\t\tctx.lineTo(params.x1, params.y1); // Draw a line to (150, 100)\n\t\t\tctx.stroke(); // Render the path\n\n\t\t\tthis.cX = params.x1;\n\t\t\tthis.cY = params.y1;\n\n\t\t}\n\n\t\tnative( operation ) {\n\n\t\t\tthis[ \"op_\" + operation.action]( operation.params);\n\t\t}\n\n\n\t\tgfxUpdate( record ) {//see 152\n\n\t\t\tvar lineLen = this.width * 4;\n\t\t\tvar cellLen = 4;\n\n\t\t\tvar pixels = record.pixels;\n\t\t\tvar ctx = this.ctx;\n\n\t\t\tvar upd = this.updCtxImageData;\n\n\t\t\tif(! upd.synched ) {\n\t\t\t\tupd.imd = ctx.getImageData( 0, 0, this.width, this.height );\n\t\t\t\tupd.data = upd.imd.data;\n\t\t\t\tupd.synched = true;\n\t\t\t}\n\n\t\t\tvar pdata = upd.data;\n\t\t\tvar imd = upd.imd;\n\n\t\t\tfor( var i=0; i< pixels.length; i++) {\n\t\t\t\tvar p = pixels[ i ];\n\n\t\t\t\tvar xrel = p.x;\n\t\t\t\tvar yrel = p.y;\n\n\t\t\t\tvar offset = ( yrel * lineLen ) + xrel * cellLen;\n\n\t\t\t\tvar c = this.bmPalette[ p.c ];\n\t\t\t\tpdata[offset+0] = c.r;\n\t\t\t\tpdata[offset+1] = c.g;\n\t\t\t\tpdata[offset+2] = c.b;\n\n\t\t\t}\n\t\t\tctx.putImageData(imd, 0, 0);\n\n\t\t}\n\n\n\t\tupdate( p, list ) {\n\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\n\t\t\tthis.x = p.cx;\n\t\t\tthis.y = p.cy;\n\t\t\tif(\n\t\t\t\tthis.x<0 || this.y<0 ||\n\t\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t\t) {\n\t\t\t\tconsole.log(\"ouch\");\n\n\t\t\t}\n\n\t\t\tthis.colors.bgHTML = this.palette[ p.bg ];\n\t\t\tthis.colors.fgHTML = this.palette[ \tp.fg ];\n\t\t\tthis.colors.bgRGB = this.bmPalette[ p.bg ];\n\t\t\tthis.colors.fgRGB = this.bmPalette[ \tp.fg ];\n\n\t\t\tthis.colors.bg = p.bg;\n\t\t\tthis.colors.fg = p.fg;\n\t\t\tthis.cursorMode = p.cursorMode;\n\n\t\t\tfor( var i=0; i< list.length; i++) {\n\n\t\t\t\tvar el = list[ i ];\n\t\t\t\tthis._int_updateArea( el.cells, el.x1, el.y1, el.x2, el.y2 );\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tupdateAll( p, srccells ) {\n\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\n\t\t\tthis.x = p.cx;\n\t\t\tthis.y = p.cy;\n\n\t\t\tif(\n\t\t\t\tthis.x<0 || this.y<0 ||\n\t\t\t\tthis.x>= this.cols || this.y>= this.rows\n\t\t\t) {\n\t\t\t\tconsole.log(\"ouch\");\n\n\t\t\t}\n\t\t\tthis.colors.bgHTML = this.palette[ p.bg ];\n\t\t\tthis.colors.fgHTML = this.palette[ \tp.fg];\n\t\t\tthis.colors.bgRGB = this.bmPalette[ p.bg ];\n\t\t\tthis.colors.fgRGB = this.bmPalette[ \tp.fg ];\n\n\t\t\tthis.colors.bg = p.bg;\n\t\t\tthis.colors.fg = p.fg;\n\t\t\tthis.cursorMode = p.cursorMode;\n\n\t\t\tthis._int_updateArea( srccells, 0,0, this.cols -1, this.rows -1 );\n\n\t\t}\n\n\tclear() {\n\t\tthis._int_blinkOff();\n\t\tthis.show();\n\n\t\tvar b=0;\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tb=1-b;\n\t\t\tfor( var y=0; y<this.rows; y++) {\n\t\t\t\tthis.cells[ y ][ x ].txt = \" \";\n\t\t\t\tthis.cells[ y ][ x ].fg = this.colors.fg;\n\t\t\t\tthis.cells[ y ][ x ].bg = this.colors.bg;\n\n\t\t\t}\n\t\t}\n\n\t\tthis.ctx.fillStyle = this.colors.bgHTML;\n\t\tthis.ctx.fillRect(0, 0, this.cvs.width, this.cvs.height);\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\n\t__int_nl() {\n\t\tthis.x = 0;\n\t\tthis.y ++;\n\t\tif( this.y >= this.rows ) {\n\t\t\tthis.__int_scrollDown();\n\t\t\tthis.y = this.rows -1;\n\t\t}\n\t}\n\n\twriteln( str ) {\n\t\t\tthis._int_blinkOff();\n\t\t\tthis.show();\n\t\t\t//console.log( \"writeln\" + str );\n\n\t\t\tfor (const c of str) {\n\t\t\t  this.__int_write_direct_ch( c );\n\t\t\t}\n\t\t\tthis.__int_nl();\n\t}\n\n\n\t__int_write_direct_ch( ch ) {\n\n\t\tvar cell = this.cells[ this.y ][ this.x ];\n\n\t\tif( cell == null ) {\n\t\t\tconsole.log( \"cell at \" + this.x + \",\" + this.y +\" == null \");\n\t\t\treturn;\n\t\t}\n\n\t\tcell = ch.txt;\n\n\t\tvar ctx = this.ctx;\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntH;\n\n\t\tvar off = 0;\n\t\tif( this.offsets[ ch.txt ] ) {\n\t\t\toff = this.offsets[ ch.txt ];\n\t\t}\n\n\t\tthis.ctx.fillStyle = this.colors.bgHTML;\n\t\tctx.fillRect(  (fsw * this.x) , fsh * (this.y ), fsw, fsh);\n\n\t\tctx.fillStyle = this.colors.fgHTML;\n\t\tctx.fillText( ch.txt , off + (fsw * this.x) , fsh * (this.y +1));\n\n\t\tthis.x++;\n\t\tif( this.x >= this.cols ) {\n\t\t\tthis.x = 0;\n\t\t\tthis.__int_nl();\n\t\t}\n\t}\n\n\tgetDimensions() {\n\t\t\treturn [this.cols, this.rows ];\n\t}\n\n\thasPixels() {\n\t\treturn true;\n\t}\n\n\tgetBitmapDimensions() {\n\t\treturn [ this.width, this.height ];\n\t}\n\n\t/*plot( x, y, col ) {\n\t\tvar ctx = this.ctx;\n\n\t\tconst pixel = ctx.getImageData( x, y, 1, 1);\n\t\tconst pdata = pixel.data;\n\n\t\tvar c = this.bmPalette[ col ];\n\t\tpdata[0] = c.r;\n\t\tpdata[1] = c.g;\n\t\tpdata[2] = c.b;\n\n\t\tctx.putImageData(pixel, x, y);\n\n\t}*/\n\n\tgetColumCount() {\n\t\treturn this.cols;\n\t}\n\n\tgetRowCount() {\n\t\treturn this.rows;\n\t}\n\n\n\t__int_scrollDown() {\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tfor( var y=0; y<this.rows-1; y++) {\n\t\t\t\tvar cell = this.cells[ y ][ x ];\n\t\t\t\tvar cellyp1 = this.cells[ y+1 ][ x ];\n\n\t\t\t\tcell = cellyp1;\n\n\t\t\t}\n\t\t}\n\n\t\t//fill last row\n\t\tvar y2 = this.rows-1;\n\t\tfor( var x=0; x<this.cols; x++) {\n\t\t\tvar cell = this.cells[ y2 ][ x ];\n\t\t\tcell.txt = \" \";\n\t\t}\n\n\t\tvar fsw = this.fontSizeIntW;\n\t\tvar fsh = this.fontSizeIntW;\n\t\tthis.ctx2.drawImage(this.cvs, 0, 0);\n\t\tvar w = this.cvs2.width;\n\t\tvar h = this.cvs2.height-fsh;\n\n\t\tthis.ctx.fillStyle = this.colors.bg;\n\t\tthis.ctx.fillRect(0, 0, this.cvs.width, this.cvs.height);\n\n\t\tthis.ctx.drawImage(this.cvs2, 0, fsh, w, h-fsh, 0, 0, w, h-fsh );\n\t\t//drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)\n\n\t}\n\n}\n\nexport { KERNALMODULE as default};\n","import  mrBeepChannelClass   from    './mrbeep-channel.js';\nimport  mrBeepClass   from           './mrbeep.js';\n\n\nclass KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\t}\n\n\tdestroy() {\n\t}\n\n\n\tinit() {\n\t\tthis.mrBeep = new mrBeepClass( mrBeepChannelClass );\n\t}\n\n\treset() {\n\t\t\tthis.mrBeep.reset();\n\t}\n\n  setVolume( x ) {\n    this.mrBeep.setVolume( x );\n  }\n\n  channelVolume( channel, x ) {\n    this.mrBeep.channelVolume( channel, x );\n  }\n\n\tchannelFrequency( channel, f ) {\n    this.mrBeep.channelFrequency( channel, f );\n  }\n\n  channelSetAttackDecayRelease( channel, attackT, decayT, releaseT ) {\n    this.mrBeep.channelSetAttackDecayRelease( channel, attackT, decayT, releaseT );\n  }\n\n  channelSetSustainLevel( channel,  sustainV ) {\n    this.mrBeep.channelSetSustainLevel( channel,  sustainV );\n  }\n\n\n  playBeep( channel, frequency, duration ) {\n    this.mrBeep.playBeep( channel, frequency, duration );\n  }\n\n  playSound( channel, frequency, duration ) {\n    this.mrBeep.playSound( channel, frequency, duration );\n  }\n\n\n  startSound( channel, frequency ) {\n    this.mrBeep.startSound( channel, frequency );\n  }\n\n  releaseSound( channel, frequency ) {\n    this.mrBeep.releaseSound( channel, frequency );\n  }\n\n\n\taddEffect( channel,  type , value, time ) {\n\n\t\tthis.mrBeep.addEffect( channel,  type , value, time );\n\n  }\n\n  clearEffect( channel ) {\n\n\t\tthis.mrBeep.clearEffect( channel );\n\n  }\n\n\tplayEffect( channel, freq ) {\n\t\tthis.mrBeep.playEffect( channel, freq );\n\t}\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  /* QFS - Qualified file system */\n  /* Qualified paths can be used to find files on other file system*/\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n\n    this.sys = sys;\n    this.key = sys.SIG + \"__LSConfirmed\" ;\n\n    this.warningOngoing = false;\n\n    console.log(\"simplewarning initialized\");\n\n    sys.notify = this;\n  }\n\n  init() {\n\n  }\n\n  simpleWarning() {\n      if( this.warningOngoing ) {\n        return;\n      }\n\n      this.oldBGColor = document.body.style.backgroundColor;\n      document.body.style.backgroundColor = \"#ffffff\";\n\n      var __this = this;\n      function clearWarning() {\n        document.body.style.backgroundColor = __this.oldBGColor;\n        __this.warningOngoing = false;\n      }\n\n      var myTimeout = setTimeout(clearWarning, 200);\n\n  }\n\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  /* QFS - Qualified file system */\n  /* Qualified paths can be used to find files on other file system*/\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n\n    this.sys = sys;\n    this.disable = sys.bootCfg.warnings.privacyMute;\n    this.key = sys.SIG + \"__LSConfirmed\" ;\n    this.verified = false;\n    this.denied = false;\n\n    console.log(\"PrivWarning initialized\");\n\n  }\n\n  init() {}\n\n  confirmLocalStorage() {\n\n    if( this.denied ) {\n      return false;\n    }\n\n    var confirmed = localStorage.getItem( this.key );\n    if( confirmed == \"true\" ) { return true; }\n\n    if( this.disable ) {\n      return true;\n    }\n\n\n    var ok = confirm(\"!! Do you allow \"+\n      this.sys.SIG +\n      \" to write to local browser storage !!\\n\"+\n      \"This is needed to simulate a local harddisk.\\n\" +\n      \" If you do not agree, you can still use the system,\\n\"+\n      \" but you won't be able to save any files, or session information.\\n\\n\"+\n      \"All information will only be stored on the local storage,\\n\"+\n      \" and will not be shared with any server, unless you will give explicit permission.\\n\\n\"+\n      \"Thank you!\"\n    );\n\n    if( !ok ) { this.denied = true; return false; }\n\n    localStorage.setItem( this.key, \"true\" );\n\n    return true;\n  }\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {}\n\n  init() {}  \n\n  getKey() {\n     return null;\n  }\n\n  setInputHandler( clazz, prefix ) {\n  }\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n    this.evtQueueKeyPress = [];\n    this.handler = null;\n    this.prefix = \"\";\n    this.cfg = sys.bootCfg.keyboard;\n  }\n\n  init() {\n    var target = this.init.inputElement;\n\n    if( target ) {\n        this.target = window;\n    }\n    else {\n      this.target = window;\n    }\n  }\n\n  getKey() {\n\n    if( this.handler ) {\n      return null;\n    }\n    if( this.evtQueueKeyPress.length == 0 ) {\n      return null;\n    }\n\n    return this.evtQueueKeyPress.shift();\n  }\n\n\n  unsetInputHandler() {\n    if( this.elFun ) {\n      this.target.removeEventListener(\"keydown\", this.elFun  );\n      this.elFun = null;\n    }\n  }\n\n  checkIfAllowDefault( e ) {\n    var tmp = 1;\n    var ad = this.cfg.allowDefault;\n    if( ! ad ) {\n      return true;\n    }\n\n    if( ad.all ) { return true }\n\n    var l = ad.events;\n    for( var i=0; i<l.length; i++) {\n      var e2 = l[i];\n      if( e2 == e.key ) {\n        return true;\n      }\n    }\n    return false;\n    //98//77/88(8(88999==007777////iiii(889[]{})))\n  }\n\n  setInputHandler( clazz, prefix ) {\n    this.handler = clazz;\n    this.prefix = prefix;\n\n    if( this.elFun ) {\n      this.target.removeEventListener(\"keydown\", this.elFun  );\n      this.elFun = null;\n    }\n\n    var queuekp = this.evtQueueKeyPress;\n    var con = this.sys.out;\n    var handler = this.handler;\n    var prefix = this.prefix;\n    var _this = this;\n\n    var f = function(event) {\n\n    //console.log( event ) ;\n\n    var kEvent =\n      {\n          type: \"keydown\",\n          key: event.key,\n          keyLabel: event.key,\n          shiftKey: event.shiftKey,\n          ctrlKey: event.ctrlKey\n      };\n\n\n      if( event.key.length > 1) {\n        kEvent.key = null;\n        kEvent.keyLabel = event.key;\n        if( event.key == \"Enter\" ) {\n          kEvent.key = \"\\n\";\n        }\n      }\n\n      if( !_this.checkIfAllowDefault( event )) {\n        event.preventDefault();\n      }\n\n      if( handler ) {\n        handler[ prefix + \"KeyHandler\" ]( kEvent );\n      } else {\n        queuekp.push( kEvent );\n      }\n    };\n\n    this.elFun = f;\n\n    this.target.inputMode = \"text\";\n    this.target.addEventListener(\"keydown\", f);\n  }\n\n}\n\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n    this.node  = document.body;\n    document.body.id = \"top\";\n    this.isAttr = false;\n  }\n\n  init() {\n  }\n\n  executeFunction( paramArray ) {\n    if( paramArray[0] == \"body.style.backgroundImage\") {\n      document.body.style.backgroundImage = \"url('\" +paramArray[1]+ \"')\";\n      document.body.style.backgroundSize = \"cover\";\n    }\n  }\n\n  execute( htmlCodeArr ) {\n    var htmlCode = htmlCodeArr[0];\n    console.log( \"execute\",  htmlCode );\n\n    var handle = htmlCode.htmlHandle;\n    if( handle ) {\n      this.setnode( handle );\n    }\n    else {\n      this.isAttr = false;\n    }\n\n    if( this.node == null ) {\n        console.log(\"invalid html root\");\n        return; //TODO back propagate error\n    }\n\n    if( this.isAttr == false ) {\n      /* element */\n\n      if( htmlCode.htmlAppend) {\n        var s = document.createElement(\"span\");\n        s.innerHTML = htmlCode.htmlValue;\n\n        const list = s.childNodes;\n        var arr = [];\n        for (let i = 0; i < list.length; i++) {\n            arr.push( list[i] );\n        }\n\n        for (let i = 0; i < arr.length; i++) {\n            this.node.appendChild( arr[i]  );\n        }\n\n        s = null;\n\n      }\n      else {\n        if( this.node.id == \"top\" ) {\n          console.log(\"Cannot replace body code. it would crash the console!\")\n          return;\n        }\n\n        this.node.innerHTML = htmlCode.htmlValue;\n      }\n    }\n    else {\n      /* attribute */\n\n      var attr = this.node.attributes.getNamedItem( this.attrName );\n      if( attr == null ) {\n        console.log(\"Attr '\"+this.attrName+\"' not found on html node \"+this.node.id+\"!\")\n        return;\n      }\n      attr = attr.nodeValue;\n\n      if( htmlCode.htmlAppend) {\n        attr = attr + htmlCode.htmlValue;\n      }\n      else {\n        attr = htmlCode.htmlValue;\n      }\n\n      this.node.setAttribute( this.attrName, attr );\n    }\n\n  }\n\n\n  setnode( handle ) {\n\n    console.log( \"setnode\",  handle );\n    this.isAttr = false;\n\n    if( handle == \"..\" ) {\n      this.node  = this.node.parentNode;\n    }\n    else {\n      var parts = handle.split(\".\");\n      var attrName = null;\n      var elName = null;\n\n      if( parts.length > 1) {\n        elName = parts[0];\n        attrName = parts[1];\n      }\n      else {\n        elName = handle;\n      }\n\n      if( elName != \"\" ) {\n        var el = document.getElementById(  elName  );\n        if( el ) {\n          this.node = el;\n        }\n        else {\n          console.log(\"could not find\", handle);\n          return;\n        }\n      }\n\n      if( attrName != \"\" && attrName != null ) {\n        this.isAttr = true;\n        this.attrName = attrName;\n    }\n\n  }\n\n}\n/*\n\n\n-- flavour 1\n\nOPEN \"html://\" FOR OUTPUT AS #1\nPRINT #1, \"<b>hello world </b>\"\nCLOSE #1\n\n-- flavour 2\n\nHTM <b id=\"mylabel\">hello world</b>\nHTMINNER \"mylabel\", \"hello 2\"\nHTMCLEAR \"mybody\"\n\nHTM \"b\", \"mylabel\" TO el\nHTMTEXT \"hello world\"\n\n-- flavour 2b\n\n; stay on same line\n+ stay in element\n\n\nHTM \"b\" TO el\nHTMTEXT el, \"hello world\"\n\n\nHTM \"b\"+\nHTMTEXT \"hello world\"+\nHTM \"br\"\nHTMTEXT \"hello world2 \"\n\n\n\n-- flavour 3\n\nHTAG \"b\";\nHTEXT \"hello world\";\nHCLOSE;\n\n-- flavour 4\n\nb = html(\"b\")\nhtml b, \"hello word\"\nsleep\nhtml b, \"hello my world\"\n\ntable = html(\"table\")\n\n--- flavour 5\n\n  #add tag\n\n  b=htag(\"b\")\n\n  or htag \"b\" to b\n\n  or htag \"b\" : REM implicit output variable hnode\n     b = hnode\n\n  hclr b\n  hprint b, \"hello world1\"\n  hprint b, \"hello world2\"\n\n\n  htag \"div\"\n  hstyle hnode add \"bg-color=red\"\n  hstyle hnode add \"font-size=10px\"\n  hprint div, \"hello world1\"\n\n  htag \"div\" in div\n  hstyle hnode add \"bg-color=blue\"\n  hprint div, \"hello world1\"\n\n  console \"\"\n\n\n  ---\n\n  h \"\" to \"<body>\"\n  h \"<div id=1000>Hello world</div>\"\n  h \"\" to 1000\n  hattr \"1000.style\" set     \"background-color=green\"\n  hattr \"1000.style\" append  \";color=red\"\n\n  hshow \"1000\", 0\n  sleep 1\n  hshow \"1000\", 0\n\n  htext \"1234\";\n\n\n----------------\n\ncontent usecases\nc1a append         >\"\"\nc1b append text\nc1c append text with newline\nc2 clear          CLR\nc3 overwrite      \"\"\nc4 get\n\nattr usecases\na1 set attribute\na2 append attribute\na3 get\n\ntarget usecases\nt1 current target      <nothing>\nt2 explicit target     <target>,\"<html>\"\nt3 jump to new target hpos hjmp, hgoto htmlj command\n\n\n*t1\nimplicit :  html \"<b>implicitly in current parent</b>\"\n\n*t2\nexplicit :\n    html 1000, \"<b>explicitly in specified parent</b>\"\n    or\n    html \"<b>explicitly in specified parent</b>\" to 1000\n\n*t3\nexplicit :  html to 1000\n\n\n\n  usecases\n  1a set body\n  1b clear body\n  2 append element in body\n  3 clear Element\n  4 append element in body\n  5 add text to element\n  6 add text to element on same line\n  7 add text to element on next line\n  8 set attr to element\n  9 append into element attr\n\n\n\n  target-and-append-usecases\n  ta1 append to current target\n  ta2 overwrite current target\n\n\n  uc 1a\n  h \"<center>hello world</center>\" to \"<body>\"\n\n  uc 2\n  h \"<div>Hello world</div>\"\n\n  uc 3\n  h \"<div id=1000>Hello world</div>\"\n  h \"\" to 1000\n\n  uc 4\n  h \"<div id=1000>Hello world</div>\"\n  h \"<b>Hello bold world</b>\" to 1000\n\n  uc 5\n  h \"<div id=1000>Hello world</div>\"\n  htxt \"Hello bold world\"\n\n  uc 6\n  h \"<div id=1000>Hello world</div>\"\n  htxt \"Hello bold world\";\n  htxt \"Hello bold world2\"\n\n  uc 7\n  h \"<div id=1000>Hello world</div>\"\n  htxt \"Hello bold world\"\n  htxt \"Hello bold world2\"\n\n\n\n*/\n\n\n}\n\nexport { KERNALMODULE as default};\n","class KERNALMODULE {\n\n  constructor( sys ) {\n\n    this.apps = [];\n    this.sys  = sys;\n    this.audioInitFlag = false;\n\n  }\n\n  audioInit() {\n\n    if( this.audioInitFlag ) {\n      return;\n    }\n\n    var sys = this.sys;\n    var audio = sys.audio;\n    this.audio = audio;\n\n    audio.channelVolume( 0, 1  );\n    audio.setVolume(1);\n\n    this.audioInitFlag = true;\n  }\n\n  init() {\n    var sys = this.sys;\n    var con = sys.out;\n\n    this.cfg = this.sys.bootCfg;\n    this.settings = {}; //settings set by the user, ex: the theme of the screen editor\n\n    var htmlwrapper = sys.m.htmlwrapper;\n    var display = sys.m.displaymodes;\n\n    this.out = con;\n\n    this.menu = sys.m.basicmenu;\n\n    if( sys.staticTarget ) {\n      this.worker = new Worker( \"basicworker.js\"   );\n    }\n    else {\n      if( sys.dynamicMinTarget ) {\n        this.worker = new Worker( \"sys/modules/basic/worker/workerbootstrap_min.js\"   );\n      }\n      else {\n        this.worker = new Worker( \"sys/modules/basic/worker/workerbootstrap_max.js\"   );\n      }\n    }\n\n    this.sys.m.qfs.loadFile( \"cache://settings.cfg\", { clazz: this, method: \"initMore\" } );\n\n  }\n\n/*\n  loadedApp( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n    this.out.blinkMode( false );\n    this.worker.postMessage({ type: \"loadpgm\", pgmData: response.data, QPath: path });\n\n  }\n  */\n\n  initMore( settingsPath, cbMessage, settingsLoadResponse ) {\n\n    var sys = this.sys;\n    var con = sys.out;\n    var audio = sys.audio;\n    var htmlwrapper = sys.m.htmlwrapper;\n    var display = sys.m.displaymodes;\n    var colors = undefined;\n    if( settingsLoadResponse.success ) {\n      colors = settingsLoadResponse.data.colors;\n    }\n\n    this.worker.postMessage(\n        {\n          type: \"inittxtarea\",\n          w: con.getColumCount(),\n          h: con.getRowCount()\n        }\n    );\n\n    this.worker.postMessage(\n        {\n          type: \"initcolors\",\n          colors: colors\n        }\n    );\n\n    this.worker.postMessage(\n        {\n          type: \"systeminfo\",\n          modes: display.getModes(),\n          mode: display.getCurrentMode(),\n          windowWidth: window.innerWidth,\n  \t\t\t\twindowHeight: window.innerHeight\n        }\n    );\n\n    this.worker.postMessage(\n        {\n          type: \"setcfg\",\n          cfg: this.cfg\n        }\n    );\n\n    var hasPixels = con.hasPixels();\n    var bWH = [-1,-1];\n    if( hasPixels ) {\n       bWH = con.getBitmapDimensions();\n    }\n\n    this.worker.postMessage(\n         {\n           type: \"initbitmap\",\n           w: bWH[ 0 ],\n           h: bWH[ 1 ]\n         }\n    );\n\n    var _parent = this;\n    this.worker.onmessage = function(e) {\n\n        var m = e.data.message;\n        var t = e.data.type;\n\n        if( t == \"syslog\" ) {\n           sys.log(\"BWSYS:\", e.data.message );\n        }\n        else if( t == \"syserr\" ) {\n           sys.logerr(\"BWERR:\", e.data.message );\n        }\n        else if( t == \"write\" ) {\n           for( var i =0; i<m.length; i++) {\n             con.write( m[i] );\n           }\n        }\n        else if( t == \"writeln\" ) {\n          for( var i =0; i<m.length; i++) {\n            con.writeln( m[i] );\n          }\n        }\n        else if( t == \"writec\" ) {\n          con.writec( m );\n\n        }\n        else if( t == \"border\" ) {\n\n          document.body.style.backgroundColor = con.htmlColor( m.d );\n\n        }\n        else if( t == \"audio\" ) {\n\n          _parent.audioInit();\n\n          //var audio = this.audio;\n          var method = m.method;\n          var parCount = m.parCount;\n          if( parCount == 1 ) {\n            audio[method]( m.p1 );\n          }\n          else if( parCount == 2 ) {\n            audio[method]( m.p1, m.p2 );\n          }\n          else if( parCount == 3 ) {\n            audio[method]( m.p1, m.p2, m.p3 );\n          }\n          else if( parCount == 4 ) {\n            audio[method]( m.p1, m.p2, m.p3, m.p4 );\n          }\n          else if( parCount == 0 ) {\n            audio[method]();\n          }\n\n        }\n        else if( t == \"blinkMode\" ) {\n          con.blinkMode( m.m );\n        }\n        else if( t == \"signalHideMenu\" ) {\n          if( sys.m.basicmenu ) {\n            console.log(\"signalHideMenu hideFlag=\" , m.hide )\n            sys.m.basicmenu.showMenu( !m.hide );\n          }\n        }\n        else if( t == \"locate\" ) {\n          con.setPos( m.c, m.r );\n        }\n        else if( t == \"load\" ) {\n          _parent.loadAppFromProgram( this, m );\n        }\n        else if( t == \"loaddata\" ) {\n          _parent.loadDataFromProgram( this, m );\n        }\n        else if( t == \"save\" ) {\n          _parent.saveProgram( this, m );\n        }\n        else if( t == \"delete\" ) {\n          _parent.deleteFile( this, m );\n        }\n        else if( t == \"dir\" ) {\n          _parent.dir( m.path, m );\n        }\n        else if( t == \"setfs\" ) {\n          _parent.setfs( m.path, m );\n          _parent.menu.setStatus( null );\n        }\n        else if( t == \"listfs\" ) {\n          _parent.listfs( m );\n        }\n        else if( t == \"html\" ) {\n          htmlwrapper.execute( m );\n        }\n        else if( t == \"htmlnode\" ) {\n          htmlwrapper.setnode( m[0].value );\n        }\n        else if( t == \"htmldofun\" ) {\n          htmlwrapper.executeFunction( m );\n        }\n        else if( t == \"displaymode\" ) {\n          display.setMode( m.m, _parent.menu );\n          display.cursor\n          con = display.getDriver();\n          sys.out =  con;\n\n          var wh = con.getDimensions();\n          var hasPixels = con.hasPixels();\n          var bWH = [-1,-1];\n\n          if( hasPixels ) {\n            bWH = con.getBitmapDimensions();\n          }\n          this.postMessage(\n            {\n            type: \"message\",\n            processId: m.processId,\n            message: \"displaysize:done\",\n            messageObject:\n              {\n                mode: m.m,\n                textW: wh[0], textH: wh[1],\n                bitmapW: bWH[0], bitmapH: bWH[1],\n              }\n            }\n            );\n\n        }\n        else if( t == \"textupdate\" ) {\n\n          var properties = {\n            cx: m.cx,\n            cy: m.cy,\n            fg: m.fg,\n            bg: m.bg,\n            cursorMode: m.cursorMode\n          };\n          sys.out.update( properties, m.areasList );\n        }\n        else if( t == \"textupdate-all\" ) {\n\n          var properties = {\n            cx: m.cx,\n            cy: m.cy,\n            fg: m.fg,\n            bg: m.bg,\n            cursorMode: m.cursorMode\n          };\n\n          sys.out.updateAll( properties, m.cells );\n        }\n        else if ( t == \"gfxupdate\" ) {\n          sys.out.gfxUpdate( m );\n        }\n        else if ( t == \"export\" ) {\n          if(m.destination == \"disk\") {\n            var callback = {\n              clazz: _parent,\n              method: \"nullHandler\",\n              data: \"\"\n            }\n            sys.m.qfs.saveFile(\"export://myprogram.bas\", m.code, callback);\n          }\n          else {\n            navigator.clipboard.writeText( m.code )\n          }\n        }\n        else if ( t == \"nativeout\" ) {\n          sys.out.native( m );\n        }\n        else if ( t == \"status\" ) {\n          //update menu\n          _parent.menu.setStatus( m.status );\n        }\n\n      }\n\n      var _this = this;\n      window.addEventListener(\"resize\", function(event) {\n        _this.windowResizeEvent( event );\n\n      });\n\n  }\n\n  windowResizeEvent( event ) {\n    var w = window.innerWidth;\n    var h = window.innerHeight;\n\n    this.worker.postMessage(\n      {\n      type: \"interrupt\",\n      sub: \"resize\",\n      data:\n        {\n          w: w,\n          h: h\n        }\n      }\n      );\n\n  }\n\n  nullHandler( data )  {\n    console.log( \"nullhandler \" + data );\n  }\n\n  loadApp( url0 ) {\n    var sys = this.sys;\n\n    sys.log(\"BSYS:\",\"Load\", url0 );\n    sys.m.qfs.loadFile( url0, { clazz: this, method: \"loadedApp\" } );\n\n  }\n\n  pasteTextFromClipboard( block, type ) {\n\n    if( type == \"txt\" ) {\n\n      var kEvent = {\n        keyLabel: \"\",\n        shiftKey: false,\n        ctrlKey: false,\n        key: \"\",\n        type: \"keydown\"\n\n      }\n\n      for ( var i = 0; i<block.length; i++) {\n        var c = block.charAt( i );\n        kEvent.key = c;\n        if( block.charCodeAt( i ) == 10) {\n          kEvent.keyLabel = \"Enter\";\n        }\n        else {\n          kEvent.keyLabel = \"\";\n        }\n\n        this.worker.postMessage( kEvent );\n      }\n    }\n    else {\n      this.worker.postMessage(\n        {\n        type: \"pastpgm\",\n        data: block\n        }\n        );\n    }\n\n  }\n\n  requestClipboardCopy() {\n\n    this.worker.postMessage({ type: \"clipboardCopy\" });\n\n  }\n\n  requestClipboardCopyScreen() {\n\n    this.worker.postMessage({ type: \"clipboardCopyScreen\" });\n\n  }\n\n  requestColorReset( colors ) {\n    this.worker.postMessage({ type: \"colorReset\", colors: colors });\n\n    var callback = {\n      clazz: this,\n      method: \"nullHandler\",\n      data: \"\"\n    }\n    this.settings.colors = colors;\n    this.sys.fs.saveFile(\"cache://settings.cfg\", this.settings, callback);\n\n  }\n\n  requestExport() {\n    this.worker.postMessage({ type: \"export\" });\n  }\n\n\n  requestFileSystems() {\n    var list =  this.sys.fs.listFS();\n    var list2 = [\"FS\", \"\"];\n\n    for( var i=0; i<list.length; i++) {\n        var f = list[i];\n        list2.push( f );\n    }\n\n    this.requestShowList( list2 );\n  }\n\n  requestListDirectory() {\n    var list =  this.sys.fs.getDir( this.sys.fs.getCurrent() );\n    var list2 = [\"DIR\", \"\"];\n\n    for( var i=0; i<list.files.length; i++) {\n        var f = list.files[i].fname;\n        list2.push( f );\n    }\n\n    this.requestShowList( list2 );\n  }\n\n  requestListScripts() {\n\t\tconsole.log(\"I am handler_listScripts\", this);\n\n\t\tvar list =  this.sys.m.script.getDir();\n\t\tvar list2 = [];\n\n\t\tfor( var i=0; i<list.files.length; i++) {\n\t\t\t\tvar f = list.files[i].fname;\n\t\t\t\tlist2.push( f );\n\t\t}\n\n\t\tthis.requestShowList( list2 );\n\n\t}\n\n\n  requestAbout() {\n\n    this.worker.postMessage({ type: \"resetConsole\" });\n\n\t\tvar list = [];\n\n    list.push( \"\" );\n    list.push( \"---------------------------\" );\n\t  list.push( \"  B3 Basic\" );\n    list.push( \"  Version 0.9\" );\n    list.push( \"  Copyright: \" );\n    list.push( \"    CursorKeys Retro, 2022\" );\n    list.push( \"---------------------------\" );\n    list.push( \"\" );\n\n\n\t\tthis.requestShowList( list );\n\n\t}\n\n\n  requestList() {\n    this.worker.postMessage({ type: \"list\" });\n  }\n\n  requestRenumber() {\n    this.worker.postMessage({ type: \"renumber\" });\n  }\n\n  requestNew() {\n    this.worker.postMessage({ type: \"new\" });\n  }\n\n  requestVars() {\n    this.worker.postMessage({ type: \"vars\" });\n  }\n\n  requestDataBlocks() {\n    this.worker.postMessage({ type: \"datablocks\" });\n  }\n\n  requestHelp() {\n    this.worker.postMessage({ type: \"help\" });\n  }\n\n  requestClearScreen() {\n    this.worker.postMessage({ type: \"clearScreen\" });\n  }\n\n  requestResetConsole() {\n    this.worker.postMessage({ type: \"resetConsole\" });\n  }\n\n  requestShowList( l ) {\n    this.worker.postMessage({ type: \"showList\", list: l });\n  }\n\n\n  requestRun() {\n    this.worker.postMessage({ type: \"run\" });\n  }\n\n  requestStop() {\n    this.worker.postMessage({ type: \"stop\" });\n  }\n\n  deleteFile( worker, m ) {\n    var sys = this.sys;\n    var path = this.devicePath( m.device, m.path );\n\n    try {\n      sys.log(\"BSYS:\",\"delete\", m.path );\n      sys.m.qfs.deleteFile( path,\n        { clazz: this, method: \"deletedFile\", path: m.path, processId: m.processId })\n\n    }\n    catch ( e ) {\n      console.log ( e )\n\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: m.processId,\n        message: \"delete:error\",\n        messageObject:\n          {\n            reason: e.message\n          }\n        }\n        );\n\n    }\n  }\n\n  deletedFile( cbMessage ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Deleted\", cbMessage.args.qpath );\n\n    var result = \"ok\";\n    var message = \"delete:completed\";\n    var reason = undefined;\n    if( !cbMessage.result ) {\n      result = \"error\";\n      message = \"delete:error\";\n    }\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: cbMessage.origCallBackRecord.processId,\n      message: message,\n      messageObject:\n        {\n          status: result,\n          reason: reason\n        }\n      }\n      );\n\n  }\n\n  saveProgram( worker, m ) {\n      var sys = this.sys;\n      var path = this.devicePath( m.device, m.path );\n\n      try {\n        sys.log(\"BSYS:\",\"Load\", m.path );\n        sys.m.qfs.saveFile( path, m.data,\n          { clazz: this, method: \"savedProgram\", processId: m.processId })\n\n      }\n      catch ( e ) {\n        console.log ( e )\n\n        this.worker.postMessage(\n          {\n          type: \"message\",\n          processId: m.processId,\n          message: \"save:error\",\n          messageObject:\n            {\n              reason: e.message\n            }\n          }\n          );\n\n      }\n  }\n\n  savedProgram( cbMessage ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Saved\", cbMessage.url );\n    //this.out.blinkMode( false );\n\n    //this.worloadAppFromProgramker.postMessage({ type: \"loadpgm\", pgmData: data, QPath: path });\n\n    var result = \"ok\";\n    if( !cbMessage.result ) {\n      result = \"error\";\n    }\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: cbMessage.origCallBackRecord.processId,\n      message: \"save:completed\",\n      messageObject:\n        {\n          status: result\n        }\n      }\n      );\n\n\n  }\n\n\n  loadDataFromProgram( worker, m ) {\n\n    var sys = this.sys;\n\n    try {\n      sys.log(\"BSYS:\",\"Load\", m.path );\n      sys.m.qfs.loadFile( m.path,\n        { clazz: this, method: \"loadedDataFromProgram\",\n        processId: m.processId,\n        label: m.label ,\n        type: m.type\n      } );\n    }\n    catch ( e ) {\n      console.log ( e )\n\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: m.processId,\n        message: \"loaddata:error\",\n        messageObject:\n          {\n            error: e.message\n          }\n        }\n        );\n\n    }\n  }\n\n  devicePath( dev, path ) {\n\n    var sys = this.sys;\n\n    if( dev > -1 ) {\n      var fs = sys.m.qfs.getFS( dev );\n      if(!fs) {\n        throw \"No such device\";\n      }\n\n      var parts = path.split(\"://\");\n      if( parts.length >1 ) {\n        throw \"Double device indicators\";\n      }\n      return fs.prefix + path;\n    }\n    return path;\n  }\n\n  loadAppFromProgram( worker, m ) {\n\n    var sys = this.sys;\n    var path = this.devicePath( m.device, m.path );\n    try {\n      sys.log(\"BSYS:\",\"Load\", m.path );\n\n      sys.m.qfs.loadFile( path, { clazz: this, method: \"loadedAppFromProgram\", processId: m.processId } );\n    }\n    catch ( e ) {\n      console.log ( e )\n\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: m.processId,\n        message: \"load:error\",\n        messageObject:\n          {\n            reason: e.message\n          }\n        }\n        );\n\n    }\n\n  }\n\n  loadedApp( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n    this.out.blinkMode( false );\n    this.worker.postMessage({ type: \"loadpgm\", pgmData: response.data, QPath: path });\n\n  }\n\n\n  loadedDataFromProgram( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n\n    if( response.success ) {\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: cbMessage.processId,\n        message: \"loaddata:completed\",\n        messageObject:\n          {\n            data: response.data,\n            label: cbMessage.label,\n            type: cbMessage.type\n          }\n        }\n        );\n      }\n      else {\n        this.worker.postMessage(\n          {\n          type: \"message\",\n          processId: cbMessage.processId,\n          message: \"loaddata:error\",\n          messageObject:\n            {\n              pgmData: null,\n              reason: response.reason\n            }\n          }\n          );\n      }\n\n  }\n\n\n  loadedAppFromProgram( path, cbMessage, response ) {\n\n    var sys = this.sys;\n    sys.log(\"BSYS:\",\"Loaded\", cbMessage.url );\n    //this.out.blinkMode( false );\n\n    //this.worloadAppFromProgramker.postMessage({ type: \"loadpgm\", pgmData: data, QPath: path });\n\n    if( response.success ) {\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: cbMessage.processId,\n        message: \"load:completed\",\n        messageObject:\n          {\n            pgmData: response.data\n          }\n        }\n        );\n      }\n      else {\n        this.worker.postMessage(\n          {\n          type: \"message\",\n          processId: cbMessage.processId,\n          message: \"load:error\",\n          messageObject:\n            {\n              pgmData: null,\n              reason: response.reason\n            }\n          }\n          );\n      }\n\n  }\n\n\n  listfs( m ) {\n\n    var list = this.sys.fs.listFS();\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: m.processId,\n      message: \"listfs:completed\",\n      messageObject:\n        {\n          fs: list,\n          currentFs: this.sys.fs.getCurrent()\n        }\n      }\n      );\n  }\n\n  setfs( path, m ) {\n\n    var result = this.sys.fs.setFS( path );\n    if( result ) { result = \"ok\"; }\n    else {  result = \"error\" ; }\n\n    this.worker.postMessage(\n      {\n      type: \"message\",\n      processId: m.processId,\n      message: \"setfs:completed\",\n      messageObject:\n        {\n          status: result\n        }\n      }\n      );\n  }\n\n  dir( path0, m ) {\n\n    try {\n      var path = this.devicePath( m.device, path0 );\n      var list = this.sys.fs.getDir( path );\n\n\n      this.worker.postMessage(\n        {\n        type: \"message\",\n        processId: m.processId,\n        message: \"dir:completed\",\n        messageObject:\n          {\n            files: list.files,\n            title: list.title,\n            free: list.free,\n            fs: list.fs\n          }\n        }\n        );\n      }\n      catch ( e ) {\n        console.log ( e )\n\n        this.worker.postMessage(\n          {\n          type: \"message\",\n          processId: m.processId,\n          message: \"dir:error\",\n          messageObject:\n            {\n              reason: e.message\n            }\n          }\n          );\n\n      }\n  }\n\n  setInput( input ) {\n\n    this.sys.log(\"BSYS: Setting input on BAPPS..\" );\n    this.input = input;\n    this.input.setInputHandler( this, \"input\" );\n\n  }\n\n  inputKeyHandler( kEvent ) {\n\n\n\n    if( this.sys.m.basicmenu ) {\n      /*close menu on any keppress*/\n      this.sys.m.basicmenu.clearMenu();\n\n      if( kEvent.key == \"v\" && kEvent.ctrlKey) {\n        console.log( kEvent );\n        this.sys.m.basicmenu.doAction(\"paste\", \"txt\" );\n        return;\n      }\n    }\n\n    if( kEvent.keyLabel == \"Backspace\" && kEvent.ctrlKey ) {\n      this.worker.postMessage({ type: \"toggleMenu\" });\n\n    }\n    else {\n      this.worker.postMessage( kEvent );\n    }\n  }\n\n}\n\nexport { KERNALMODULE as default};\n","import  menuData   from        './menudata.js';\nimport  menuHandlers   from        './handlers.js';\n\nclass KERNALMODULE {\n\n\tconstructor( sys ) {\n\t\tthis.sys = sys;\n\n\t\tthis.defaultPasteText = \"Press CTRL-V here\";\n\n\t\tthis.options = new menuData().getOptions();\n\t\tthis.handlers = new menuHandlers( this );\n    this.menus = {};\n\t\tthis.statusWidgets = {};\n\t\tthis.status = {\n\t\t\tpgmLen: 0,\n\t\t\tstatus: \"stopped\",\n\t\t\tvarLen: 0,\n\t\t\tdisplayMode: 0\n\t\t}\n\n\t\tthis.mnuBttnOptContainers = [];\n\t\tthis.mnuBttnOptContainersTgl = [];\n\t\tthis.mnuBttns = [];\n\t\tthis.mnuBttnContainers = [];\n\t\tthis.mnuLinks = [];\n\n\t\tthis.color = \"#ffffff\";\n\t\tthis.bgColor = \"#000000\";\n\t\tthis.font = \"16px arial,serif\";\n\n\t\tthis.statusTopMargin = \"4px\";\n\t\tthis.statusColor = \"#eeffff\";\n\t\tthis.statusBgColor = \"#000000\";\n\t\tthis.statusFont = \"700 14px arial,serif\";\n\n\t\tthis.cnt = 0;\n\t}\n\n\tdestroy() {\n\n\t\tvar f = this.getOnClickMenuButtonFunc();\n\t\tvar tmp = 1;\n\n\t\tfor( var i=0; i<this.mnuBttns.length ; i++ ) {\n\t\t\tvar b = this.mnuBttns[i];\n\t\t\tb.dataset.i = i;\n\n\t\t\tvar optLst = this.mnuBttnOptContainers[i];\n\n\t\t\tvar f = this.getOnClickMenuButtonFunc();\n\t\t\tb.removeEventListener( \"click\", f );\n\n\t\t\tvar ll = this.mnuLinks[i];\n\n\t\t\tfor( var k=0; k<ll.length ; k++ ) {\n\t\t\t\tvar lnk = ll[ k ];\n\t\t\t\tlnk.dataset.i = i;\n\t\t\t\tlnk.removeEventListener( \"click\", this.getClickLinkFunc() );\n\t\t\t\tlnk.removeEventListener( \"mouseover\", this.getOnOverLinkFunc() );\n\t\t\t}\n\t\t}\n\t\tthis.element = null;\n\t}\n\n\n\tinit() {\n\t\tthis.handlers.setBasic();\n\t\tthis.basic = this.sys.m.basic;\n\t}\n\n\tshowMenu( flag ) {\n\t\tif( flag ) {\n\t\t\tthis.element.style.display = \"flex\";\n\t\t}\n\t\telse {\n\t\t\tthis.element.style.display = \"none\";\n\t\t}\n\t}\n\n\tbutton( parent, id, text, menuOptions ) {\n\n\t\tvar div0 = document.createElement(\"div\");\n\t\tvar buttn0 = document.createElement(\"button\");\n\t\tvar div1 = document.createElement(\"div\");\n\n\t\tdiv0.appendChild( buttn0 );\n\t\tdiv0.appendChild( div1 );\n\n\t\tdiv0.id = \"menu_buttnparent_\" + id;\n\t\t//div0.style.float = \"left\";\n\t\tbuttn0.innerHTML = text;\n\t\tbuttn0.id = \"menu_buttn_\" + id;\n\t\tbuttn0.style.backgroundColor = this.bgColor;\n\t\tbuttn0.style.color = this.color;\n\t\tbuttn0.style.font = this.font;\n\t\tbuttn0.style.marginLeft = \"2px\";\n\t\tbuttn0.style.marginRight = \"0px\";\n\t\tbuttn0.style.borderTop = \"0px #ccc solid\";\n\t\tbuttn0.style.borderBottom = \"0px #ccc solid\";\n\t\tbuttn0.style.borderLeft = \"0px #777 solid\";\n\t\tbuttn0.style.borderRight = \"0px #777 solid\";\n\n\t\tdiv1.id = \"menu_opts_buttn_\" + id;\n\n\t\tdiv1.style.display = \"none\";\n\t\tdiv1.style.marginLeft = \"2px\";\n\t\tdiv1.style.position = \"absolute\";\n\t\tdiv1.style.minWidth = \"260px\";\n\t\tdiv1.style.zIndex = \"1\";\n\t\tdiv1.style.backgroundColor = this.bgColor;\n\t\tdiv1.style.color = this.color;\n\t\tdiv1.style.borderTop = \"1px #ccc solid\";\n\t\tdiv1.style.borderBottom = \"1px #ccc solid\";\n\t\tdiv1.style.borderLeft = \"1px #777 solid\";\n\t\tdiv1.style.borderRight = \"1px #777 solid\";\n\n\t\tthis.mnuBttns.push( buttn0 );\n\t\tthis.mnuBttnContainers.push( div0 );\n\t\tthis.mnuBttnOptContainers.push( div1 );\n\t\tthis.mnuBttnOptContainersTgl.push( { active: false } );\n\t\tvar lnks = [];\n\n\t\tif(  menuOptions ) {\n\t\t\tfor( var i=0; i<menuOptions.length; i++) {\n\t\t\t\tvar o = menuOptions[ i ];\n\n\t\t\t\tvar lnk = document.createElement(\"a\");\n\t\t\t\tlnk.innerHTML = o.display;\n\t\t\t\tlnk.style.padding = \"12px 16px\";\n\t\t\t\tlnk.style.display = \"block\";\n\t\t\t\tlnk.style.font = this.font;\n\t\t\t\tlnk.dataset.action = o.opt;\n\t\t\t\tif( o.data ) {\n\t\t\t\t\tlnk.dataset.data = JSON.stringify( o.data );\n\t\t\t\t}\n\t\t\t\tlnks.push( lnk );\n\t\t\t\tdiv1.appendChild( lnk );\n\t\t\t}\n\t\t}\n\n\t\tthis.mnuLinks.push( lnks );\n\n\t\tdiv0.style.display = \"inline-block\";\n\t\tdiv0.style.position = \"relative\";\n\t\t//div0.style.marginTop = \"12px\";\n\n\t\tparent.appendChild( div0 );\n\n\t}\n\n\tdoAction( id, data ) {\n\t\tthis.showMenu( true );\n\t\tthis.handlers.doExposedAction( id, data );\n\t}\n\n\tstatusItem( parent, text ) {\n\n\n\t\tvar div0 = document.createElement(\"div\");\n\t\tdiv0.innerText = text;\n\t\tif( text == \"\" ) {\n\t\t\tdiv0.style.width = \"10px\";\n\t\t}\n\t\telse if( text == \" \" ) {\n\t\t\tdiv0.style.width = \"50px\";\n\t\t}\n\n\t\tdiv0.style.marginTop= this.statusTopMargin;\n\t\tdiv0.style.color = this.statusColor;\n\t\tdiv0.style.backgroundColor = this.statusBgColor;\n\t\tdiv0.style.font = this.statusFont;\n\t\tparent.appendChild( div0 );\n\n\t\tthis.statusWidgets.list.push( div0 );\n\t\treturn div0;\n\n\t}\n\n\tstatusItems( parent ) {\n\n\n\t\tthis.statusWidgets.list = [];\n\n\t\tthis.statusItem( parent, \" \");\n\t\tthis.statusWidgets.displayMode = this.statusItem( parent, \"MODE: \" + this.status.displayMode );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.fs = this.statusItem( parent, \"FS: \" + this.sys.fs.getCurrent()  );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.pgmLen = this.statusItem( parent, \"LINES: \" + this.status.pgmLen );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.varLen = this.statusItem( parent, \"VARCOUNT: \" + this.status.varLen );\n\t\tthis.statusItem( parent, \"\");\n\t\tthis.statusWidgets.interpreterStatus = this.statusItem( parent, \"STATUS: \" + this.status.status );\n\n\t}\n\n\n\tsetStatus( status ) {\n\n\t\tthis.statusWidgets.fs.innerText = \"FS: \" + this.sys.fs.getCurrent() ;\n\n\t\tif( status ) {\n\t\t\tthis.status = status;\n\t\t\tthis.statusWidgets.interpreterStatus.innerText = \"STATUS: \" + this.status.status;\n\t\t\tthis.statusWidgets.pgmLen.innerText = \"LINES: \" + this.status.pgmLen;\n\t\t\tthis.statusWidgets.varLen.innerText = \"VARCOUNT: \" + this.status.varLen;\n\t\t\tthis.statusWidgets.displayMode.innerText = \"MODE: \" + this.status.displayMode;\n\n\n\n\t\t}\n\n\t}\n\n\n\tbuttons( parent ) {\n\n\t\tvar mainOptions = this.options[\"main\"]\n\t\tfor( var i=0; i<mainOptions.length ; i++ ) {\n\t\t\tvar o = mainOptions[i];\n\n\t\t\tthis.button( parent, i, o.display, this.options[ o.opt ]  );\n\t\t}\n\t}\n\n\n\tonDeselect() {\n\t\tif( this.element.style.display != \"none\" ) {\n\t\t\tthis.clearMenu();\n\t\t}\n\t}\n\n\tstyleButtons( buttonTable ) {\n\t\tbuttonTable.style.backgroundColor = \"black\";\n\t\tbuttonTable.style.color = \"white\";\n\t\tbuttonTable.style.width = \"100%\";\n\n\t}\n\n\tcreate() {\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.style.marginLeft = \"auto\";\n\t\tthis.element.style.marginRight = \"auto\";\n\t\tthis.element.style.display = \"none\";\n\t\tthis.element.style.backgroundColor = this.statusBgColor;\n\t\tthis.element.style.paddingBottom = \"5px\";\n\t\tthis.element.style.paddingTop = \"5px\";\n\n\t\tthis.buttons( this.element );\n\n\t\tthis.statusItems( this.element );\n\n\t\tvar paste = document.createElement(\"div\");\n\t\tthis.pastebox = paste;\n\t\tpaste.style.display = \"none\";\n\t\tpaste.style.width = \"100%\";\n\n\t\tvar ta = document.createElement(\"textarea\");\n\t\tthis.pasteArea = ta;\n\t\tta.style.width = \"100%\";\n\t\tta.style.height = \"200px\";\n\t\tthis.element.appendChild( paste );\n\t\tpaste.appendChild( ta );\n\n\t\t//this.styleButtons( this.element.childNodes[0]\t);\n\n\t}\n\n\tget() {\n\t\treturn this.element;\n\t}\n\n\n\tgetClickLinkFunc() {\n\n\t\tvar __this = this;\n\n\t\treturn function(){\n\n\t\t\tconsole.log( this.dataset.action );\n\n\n\t\t\tfor( var j=0; j<__this.mnuBttnOptContainers.length ; j++ ) {\n\t\t\t\tvar optLst2 = __this.mnuBttnOptContainers[j];\n\t\t\t\tvar optLstTgl = __this.mnuBttnOptContainersTgl[j];\n\n\t\t\t\tconsole.log(\"dsp[\"+j+\"]\" , optLst2 );\n\t\t\t\toptLst2.style.display = \"none\";\n\t\t\t\toptLstTgl.active = false;\n\n\t\t\t}\n\n\t\t\tvar funData = undefined;\n\t\t\tif( (typeof this.dataset.data).toLowerCase() == \"string\" ) {\n\t\t\t\tfunData = JSON.parse( this.dataset.data );\n\t\t\t}\n\t\t\tif( this.dataset.action.startsWith(\"@\")  ) {\n\t\t\t\t__this.basic[ this.dataset.action.substr(1) ]( funData );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t__this.handlers[ \"handler_\" + this.dataset.action ]( funData );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetOnOverLinkFunc() {\n\n\t\tvar __this = this;\n\n\t\treturn function(){\n\n\t\t\tvar ll = __this.mnuLinks[ this.dataset.i ];\n\n\t\t\tfor( var k2=0; k2<ll.length ; k2++ ) {\n\t\t\t\tvar lnk2 = ll[ k2 ];\n\n\t\t\t\tlnk2.style.color = __this.color;\n\t\t\t\tlnk2.style.backgroundColor = __this.bgColor;\n\n\t\t\t}\n\n\n\t\t\tthis.style.color = __this.bgColor;\n\t\t\tthis.style.backgroundColor = __this.color;\n\t\t}\n\t}\n\n\tgetOnClickMenuButtonFunc() {\n\n\t\tvar __this = this;\n\n\t\treturn function(){\n\n\t\t\tvar thisIx = this.dataset.i;\n\t\t\tvar active =  __this.mnuBttnOptContainersTgl[ thisIx ].active;\n\n\t\t\t//Disable all other menus\n\t\t\tfor( var j=0; j<__this.mnuBttnOptContainers.length ; j++ ) {\n\t\t\t\tvar optLst2 = __this.mnuBttnOptContainers[j];\n\t\t\t\tvar optLstTgl = __this.mnuBttnOptContainersTgl[j];\n\n\t\t\t\tconsole.log(\"dsp[\"+j+\"]\" , optLst2 );\n\t\t\t\toptLst2.style.display = \"none\";\n\t\t\t\toptLstTgl.active = false;\n\n\t\t\t}\n\n\t\t\tfor( var j=0; j<__this.mnuBttnOptContainers.length ; j++ ) {\n\t\t\t\tvar optLst2 = __this.mnuBttnOptContainers[j];\n\t\t\t\tconsole.log(\"dsp[\"+j+\"]\" , optLst2.style.display );\n\n\t\t\t}\n\n\n\t\t\tvar ll = __this.mnuLinks[ thisIx ];\n\t\t\tfor( var k=0; k<ll.length ; k++ ) {\n\t\t\t\tvar lnk2 = ll[ k ];\n\n\t\t\t\tlnk2.style.color = __this.color;\n\t\t\t\tlnk2.style.backgroundColor = __this.bgColor;\n\n\t\t\t}\n\n\t\t\tvar optLst = __this.mnuBttnOptContainers[ thisIx ];\n\n\t\t\tconsole.log(active);\n\t\t\tif( active ) {\n\t\t\t\t__this.mnuBttnOptContainersTgl[ thisIx ].active = false;\n\t\t\t\toptLst.style.display = \"none\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t__this.mnuBttnOptContainersTgl[ thisIx ].active = true;\n\t\t\t\toptLst.style.display = \"block\";\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tenable() {\n\t\tvar tmp = 1;\n\n\t\tfor( var i=0; i<this.mnuBttns.length ; i++ ) {\n\t\t\tvar b = this.mnuBttns[i];\n\t\t\tb.dataset.i = i;\n\n\t\t\tvar optLst = this.mnuBttnOptContainers[i];\n\n\t\t\tvar f = this.getOnClickMenuButtonFunc();\n\t\t\tb.addEventListener( \"click\", f );\n\n\t\t\tvar ll = this.mnuLinks[i];\n\n\t\t\tfor( var k=0; k<ll.length ; k++ ) {\n\t\t\t\tvar lnk = ll[ k ];\n\t\t\t\tlnk.dataset.i = i;\n\t\t\t\tlnk.addEventListener( \"click\", this.getClickLinkFunc() );\n\t\t\t\tlnk.addEventListener( \"mouseover\", this.getOnOverLinkFunc() );\n\t\t\t}\n\n\n\t\t}\n\t}\n\n\tsetDimensions( w,h ) {\n\t\t\tthis.element.style.width = w + \"px\";\n\t\t\tthis.element.style.textAlign = \"left\";\n\t}\n\n\tclearMenu() {\n\t\tfor( var j=0; j<this.mnuBttnOptContainers.length ; j++ ) {\n\n\t\t\tvar optLstTgl = this.mnuBttnOptContainersTgl[j];\n\n\t\t\tif( optLstTgl.active ) {\n\n\t\t\t\tvar optLst2 = this.mnuBttnOptContainers[j];\n\t\t\t\t//console.log(\"dsp[\"+j+\"]\" , optLst2 );\n\t\t\t\toptLst2.style.display = \"none\";\n\t\t\t\toptLstTgl.active = false;\n\t\t\t}\n\t\t}\n\t}\n\n\thideMenu() {\n\n\t\tfor( var j=0; j<this.mnuBttnContainers.length ; j++ ) {\n\t\t\tvar buttonCtr = this.mnuBttnContainers[j];\n\t\t\tbuttonCtr.style.display = \"none\";\n\t\t}\n\n\t\tvar statusWidgets = this.statusWidgets.list;\n\t\tfor( var j=0; j<statusWidgets.length ; j++ ) {\n\t\t\tvar wid = statusWidgets[j];\n\t\t\twid.style.display = \"none\";\n\t\t}\n\n\n\n\t}\n\n\tunhideMenu() {\n\n\t\tfor( var j=0; j<this.mnuBttnContainers.length ; j++ ) {\n\t\t\tvar buttonCtr = this.mnuBttnContainers[j];\n\t\t\tbuttonCtr.style.display = \"block\";\n\t\t}\n\n\t\tvar statusWidgets = this.statusWidgets.list;\n\t\tfor( var j=0; j<statusWidgets.length ; j++ ) {\n\t\t\tvar wid = statusWidgets[j];\n\t\t\twid.style.display = \"block\";\n\t\t}\n\n\t}\n\n\n}\n\nexport { KERNALMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.initialized = false;\n    this.sys = sys;\n    this.prefix = sys.SIG + sys.SUBSYS  + \"__\" ;\n\n    this.deviceId = 6;\n  }\n\n  init() {\n    this.initialize();\n  }\n\n  initialize() {\n    this.currentDisk = \"SYS\";\n    this.initialized=true;\n    this.privacy = this.sys.m.priv;\n\n  }\n\n  ready() {\n    return this.initialized;\n  }\n\n  getEmptyDirStructure(name) {\n    return {files:[], title: \"temporary session\" };\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n\n    if( !this.initialized ) {\n      return getEmptyDirStructure(null);\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n    var json = sessionStorage.getItem( storageName );\n\n    if(!json) {\n      return {files:[], title: \"temporary session\" };\n    }\n\n    var dir = JSON.parse( json );\n    if(!dir) {\n      return {files:[], title: \"temporary session\" };\n    }\n\n    var title = dir.title;\n\n    dir.title = title;\n    dir.free = 32-dir.files.length;\n\n    var foundNullIx = -1;\n\n    while( true ) {\n      for( var i=0; i<dir.files.length; i++) {\n        if( dir.files[i] == null) {\n          foundNullIx = i;\n          break;\n        }\n      }\n      if( foundNullIx > -1) {\n        dir.files.splice( foundNullIx, 1 );\n        foundNullIx = -1;\n      }\n      else {\n        break;\n      }\n    }\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<dir.files.length; i++) {\n        if( defaultMatcherFunction (  path, dir.files[i].fname ) ) {\n          files2.push( dir.files[ i ] );\n        }\n      }\n\n      dir.files = files2;\n      dir.free = 32-dir.files.length;\n    }\n\n    return dir;\n\n  }\n\n\n  setDir( dir ) {\n\n\n    if( this.privacy.confirmLocalStorage() == false ) { return ; }\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n\n    sessionStorage.setItem(storageName, JSON.stringify( dir ) );\n\n  }\n\n  existsFile( fileName ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    var dir = this.getDir( \"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      return true;\n    }\n    return false;\n  }\n\n\n  removeFromDir( fileName ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir(\"\", null);\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files.splice( i, 1 );\n    }\n    this.setDir(dir);\n  }\n\n  updateDir( fileName, programLen, type ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir( \"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files[i].size = programLen;\n      dir.files[i].type = type;\n    }\n    else {\n      dir.files.push( {fname: fileName, size: programLen, type: type } );\n    }\n    this.setDir(dir);\n  }\n\n\n  saveFile( fileName0, data, type, length ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    if( this.privacy.confirmLocalStorage() == false ) { return false; }\n\n    var fileName = fileName0;\n    if( fileName0.length > 32) {\n        fileName = fileName0.substr(0,32);\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    var container = JSON.stringify( { type: type, data: data} );\n    sessionStorage.setItem(storageName, container );\n\n    this.updateDir( fileName, length, type );\n\n    return true;\n  }\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  loadFile( fileName, cbRec ) {\n\n    if( !this.initialized ) {\n      throw makeError(\"Filesystem not initialized\");\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    var json = sessionStorage.getItem( storageName );\n\n    if(!json) {\n      throw makeError(\"File not found\");\n    }\n\n    var data;\n    try {\n      data = JSON.parse( json ).data;\n    }\n    catch( e ) {\n      throw makeError(\"File corrupt\", e);\n      return;\n    }\n\n    cbRec.clazz[ cbRec.method ]( fileName, cbRec, data );\n\n  }\n\n  deleteFile( fileName ) {\n    if( ! this.existsFile( fileName ) ) {\n      return \"no such file\";\n    }\n\n    try {\n      this.removeFromDir( fileName );\n      this._removeFile( fileName );\n    }\n    catch ( e ) {\n      return \"unexpected\";\n    }\n    return \"ok\";\n  }\n\n  _removeFile( fileName ) {\n\n    var storageName =  this.prefix + \"\" +\n      this.currentDisk + \"_\" +\n      fileName;\n\n    sessionStorage.removeItem( storageName );\n\n  }\n\n  formatDisk() {\n\n    var dir = this.getDir( \"\", null );\n\n    for( var i=0; i<dir.files.length; i++) {\n\n        var fileName = dir.files[i].fname;\n        this._removeFile( fileName );\n\n    }\n\n    dir.files = [];\n    dir.title = \"Empty\"\n    this.setDir( );\n\n  }\n\n\n  getFullDisk() {\n\n    if( !this.initialized ) {\n\n      var dir = this.getDir( \"\", null);\n\n      var disk = {\n        dir: dir,\n        content: []\n      };\n\n      var diskStr = JSON.stringify( disk );\n\n      return diskStr;\n    }\n\n    var dir = this.getDir(\"\", null);\n    var content = [];\n\n    for( var i=0; i<dir.files.length; i++) {\n        var fileName = dir.files[i].fname;\n        var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n        var json = sessionStorage.getItem( storageName );\n        content.push( { fname: fileName ,content: json} );\n    }\n\n    var disk = {\n      dir: dir,\n      content: content\n    };\n\n    var diskStr = JSON.stringify( disk );\n\n    console.log( diskStr );\n\n    return diskStr;\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.initialized = false;\n    this.sys = sys;\n    this.prefix = sys.SIG + \"_\" + sys.SUBSYS + \"__\" ;\n    this.deviceId = 5;\n\n    console.log( \"FILESYSMODULE lfs: \" + this.prefix );\n\n  }\n\n  makeDataContainer( data ) {\n    return {\n      success: true,\n      data: data\n    }\n  }\n\n  init() {\n    this.initialize();\n  }\n\n  initialize() {\n\n    this.privacy = this.sys.m.priv;\n\n    this.disks = [];\n    this.currentDisk = null;\n    var defaultDisk = \"0001\"\n\n    var json = localStorage.getItem( this.prefix + \"disks_list\" );\n    if( json == null ) {\n\n      var diskId = \"0001\";\n      var diskName = \"Default\";\n      this.disks = [ diskId ];\n      this.currentDisk = diskId;\n      this.lastDisk = 1;\n      this.disksNotInitialized = true;\n\n      if( this.privacy.confirmLocalStorage() == true ) {\n        localStorage.setItem( this.prefix + \"disks_list\", JSON.stringify( this.disks ) );\n        localStorage.setItem( this.prefix + \"0001_dir\", JSON.stringify( {files:[], title: diskName, readOnly: false } ) );\n        localStorage.setItem( this.prefix + \"disk_current\", diskId );\n\n        this.formatDisk();\n      }\n    }\n    else {\n      this.disks = JSON.parse( json );\n      this.currentDisk = localStorage.getItem( this.prefix + \"disk_current\" );\n\n      var last = -1;\n      for( var i=0; i<this.disks.length; i++) {\n        if( parseInt( this.disks[i] ) > last ) {\n          last = parseInt( this.disks[ i ] );\n        }\n      }\n      this.lastDisk = last;\n    }\n\n\n    this.initialized=true;\n\n  }\n\n\n  selectDisk( diskId ) {\n    this.currentDisk = diskId;\n\n    if( this.privacy.confirmLocalStorage() == true ) {\n      localStorage.setItem( this.prefix + \"disk_current\", diskId );\n    }\n  }\n\n  ready() {\n    return this.initialized;\n  }\n\n\n  getDisks() {\n\n    if( !this.initialized ) {\n      return [];\n    }\n\n    var storageName =  this.prefix + \"disks_list\";\n    var json = localStorage.getItem( storageName );\n    var disks = JSON.parse( json );\n\n    return disks;\n\n  }\n\n  getEmptyDirStructure(name) {\n    return {files:[], title: \"null\" };\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n\n    if( !this.initialized ) {\n      return this.getEmptyDirStructure(null);\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n    var json = localStorage.getItem( storageName );\n    var dir = JSON.parse( json );\n\n    //var title = \"0 \\u0012\\\"\"+dir.title+\"          \\\"\\u0092 00 2A\";\n    var title = dir.title;\n\n    if(!json) {\n      return {files:[], title: title };\n    }\n    dir.title = title;\n    dir.free = 32-dir.files.length;\n\n    var foundNullIx = -1;\n\n    while( true ) {\n      for( var i=0; i<dir.files.length; i++) {\n        if( dir.files[i] == null) {\n          foundNullIx = i;\n          break;\n        }\n      }\n      if( foundNullIx > -1) {\n        dir.files.splice( foundNullIx, 1 );\n        foundNullIx = -1;\n      }\n      else {\n        break;\n      }\n    }\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<dir.files.length; i++) {\n        if( defaultMatcherFunction (  path, dir.files[i].fname ) ) {\n          files2.push( dir.files[ i ] );\n        }\n      }\n\n      dir.files = files2;\n      dir.free = 32-dir.files.length;\n    }\n\n\n\n    return dir;\n\n  }\n\n\n\n  setDir( dir ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_dir\";\n\n    if( this.privacy.confirmLocalStorage() == true ) {\n      localStorage.setItem(storageName, JSON.stringify( dir ) );\n    }\n\n  }\n\n  existsFile( fileName ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    var dir = this.getDir(\"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      return true;\n    }\n    return false;\n  }\n\n\n  removeFromDir( fileName ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir(\"\", null);\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files.splice( i, 1 );\n    }\n    this.setDir(dir);\n  }\n\n  updateDir( fileName, programLen, type ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var dir = this.getDir( \"\", null );\n\n    var found = -1;\n    for( var i=0; i<dir.files.length; i++) {\n      if( dir.files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      dir.files[i].size = programLen;\n      dir.files[i].type = type;\n    }\n    else {\n      dir.files.push( {fname: fileName, size: programLen, type: type } );\n    }\n    this.setDir(dir);\n  }\n\n\n  saveFile( fileName0, data, type, length ) {\n\n    if( !this.initialized ) {\n      return;\n    }\n\n    var fileName = fileName0;\n    if( fileName0.length > 32) {\n        fileName = fileName0.substr(0,32);\n    }\n\n    if( fileName.startsWith(\"$/\") ) {\n      fileName = fileName.substr( 2 );\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    //save pgm\n    var container = JSON.stringify( { type: type, data: data} );\n    if( this.privacy.confirmLocalStorage() == true ) {\n      localStorage.setItem(storageName, container );\n      this.updateDir( fileName, length, type );\n\n      return true;\n    }\n\n    return false;\n  }\n\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  loadFile( fileName0, cbRec ) {\n\n    var makeError = this.makeError;\n\n    if( !this.initialized ) {\n      throw makeError(\"Filesystem not initialized\");\n    }\n\n    var fileName = fileName0;\n\n    if( fileName == \"*\" )  {\n        var dir = this.getDir(\"\",null);\n        if( dir.files ) {\n          if( dir.files.length > 0) {\n            if( dir.files[0]) {\n              fileName = dir.files[0].fname;\n            }\n          }\n        }\n    }\n\n    var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n\n    var json = localStorage.getItem( storageName );\n    if(!json) {\n      throw makeError(\"File not found\");\n    }\n\n    var data;\n    try {\n      data = JSON.parse( json ).data;\n    }\n    catch( e ) {\n      throw makeError(\"File corrupt\", e);\n      return;\n    }\n\n    cbRec.clazz[ cbRec.method ]( fileName0, cbRec, this.makeDataContainer( data ) );\n\n  }\n\n  deleteFile( fileName ) {\n    if( ! this.existsFile( fileName ) ) {\n      throw \"no such file\";\n    }\n\n    try {\n      this.removeFromDir( fileName );\n      this._removeFile( fileName );\n    }\n    catch ( e ) {\n      throw \"unexpected (\"+e.message+\")\";\n    }\n    return true;\n  }\n\n  _removeFile( fileName ) {\n\n    var storageName =  this.prefix + \"\" +\n      this.currentDisk + \"_\" +\n      fileName;\n\n    localStorage.removeItem( storageName );\n\n  }\n\n  formatDisk() {\n\n    var dir = this.getDir(\"\", null);\n\n    for( var i=0; i<dir.files.length; i++) {\n\n        var fileName = dir.files[i].fname;\n        this._removeFile( fileName );\n\n    }\n\n    dir.files = [];\n    dir.title = \"Empty\"\n    this.setDir( );\n\n  }\n\n  createDiskFromImage( name, image ) {\n\n    this.createDiskFromImage2( name, image, false );\n\n  }\n\n  createSysDiskFromImage( image ) {\n\n    this.createDiskFromImage2( \"SYS\", image, true );\n\n  }\n\n  createDiskFromImage2( name, image, sysDisk ) {\n\n    if( this.privacy.confirmLocalStorage() == false ) { return ; }\n\n    var labl;\n    if( !sysDisk ) {\n      this.lastDisk++;\n      labl = \"\" + this.lastDisk;\n    }\n    else {\n      labl = \"\" + 1;\n    }\n\n    labl = labl.padStart( 4,\"0\");\n    var dir = image.dir;\n    var content = image.outtent;\n\n    var storageName =  this.prefix + \"\" + labl + \"_dir\";\n\n\n    localStorage.setItem(storageName, JSON.stringify( dir ) );\n\n\n    for( var i=0; i<content.length; i++) {\n        var fileName = content[i].fname;\n        var storageName =  this.prefix + \"\" + labl + \"_\" + fileName;\n        localStorage.setItem( storageName, content[i].outtent );\n    }\n\n    this.disks.push( labl );\n    localStorage.setItem( this.prefix + \"disks_list\", JSON.stringify( this.disks ) );\n\n  }\n\n  createDisk() {\n\n    if( this.privacy.confirmLocalStorage() == false ) { return ; }\n    var existingDisks = this.getDisks();\n    this.lastDisk ++;\n    var labl = \"\" + this.lastDisk;\n    labl = labl.padStart( 4,\"0\");\n\n    var newDir = this.getEmptyDirStructure(\"NEW DISK\");\n\n    var storageName =  this.prefix + \"\" + labl + \"_dir\";\n    localStorage.setItem(storageName, JSON.stringify( newDir ) );\n\n    this.disks.push( labl );\n    localStorage.setItem( this.prefix + \"disks_list\", JSON.stringify( this.disks ) );\n\n  }\n\n  getFullDisk() {\n\n    if( !this.initialized ) {\n\n      var dir = this.getDir( \"\", null);\n\n      var disk = {\n        dir: dir,\n        content: []\n      };\n\n      var diskStr = JSON.stringify( disk );\n\n      return diskStr;\n    }\n\n    var dir = this.getDir(\"\", null);\n    var content = [];\n\n    for( var i=0; i<dir.files.length; i++) {\n        var fileName = dir.files[i].fname;\n        var storageName =  this.prefix + \"\" + this.currentDisk + \"_\" + fileName;\n        var json = localStorage.getItem( storageName );\n        content.push( { fname: fileName ,content: json} );\n    }\n\n    var disk = {\n      dir: dir,\n      content: content\n    };\n\n    var diskStr = JSON.stringify( disk );\n\n    console.log( diskStr );\n\n    return diskStr;\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n\n    this.files = [];\n    this.data  = {};\n\n    this.deviceId = 7;\n  }\n\n  init() {}\n\n  ready() {\n    return true;\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n\n    var files = this.files;\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<this.files.length; i++) {\n        if( defaultMatcherFunction (  path, this.files[i].fname ) ) {\n          files2.push( this.files[ i ] );\n        }\n      }\n\n      files = files2;\n    }\n\n    return {\n      title: \"Ram Disk\",\n      files: files,\n      free: 0\n    }\n  }\n\n  exists( fileName ) {\n\n    var dir = this.getDir(\"\",null);\n    var files = dir.files;\n\n    var found = -1;\n    for( var i=0; i<files.length; i++) {\n      if( files[i].fname == fileName ) {\n        found  = i;\n        break;\n      }\n    }\n\n    if( found > -1 ) {\n      return true;\n    }\n    return false;\n  }\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  saveFile( fileName, data, type, size ) {\n\n    if( fileName.indexOf(\"/\") >-1 ) {\n      throw {\n        message: \"saveFile: '\"+fileName+\"' - invalid path, RAMFS device only supports flatdir\"\n      }\n    }\n    if( ! this.exists( fileName ) ) {\n      var fEntry = {\n        fname: fileName,\n        type: type,\n        size: size\n      }\n\n      this.data[ fileName ] = { type: type, data: data};\n      this.files.push( fEntry );\n    }\n\n  }\n\n\n  makeDataContainer( data ) {\n    return {\n      success: true,\n      data: data\n    }\n  }\n\n\n  loadFile( fileName, cbRec ) {\n\n    if( ! this.exists( fileName ) ) {\n      throw makeError(\"File not found\");\n    }\n\n    var response =\n      this.makeDataContainer(\n        this.data[ fileName ].data\n      );\n\n    cbRec.clazz[ cbRec.method ]( fileName, cbRec, response );\n\n    //return this.data[ fileName ];\n\n  }\n\n  deleteFile( fileName ) {\n\n    if( ! this.exists( fileName ) ) {\n      return false;\n    }\n\n    try {\n      var files = this.files;\n      var files2 = [];\n\n      for( var i=0; i<files.length; i++) {\n        if( files[i].fname != fileName ) {\n          files2.push( files[i] );\n        }\n      }\n\n      this.data[ fileName ] = undefined;\n      this.files = files2;\n    }\n    catch ( e ) {\n      throw {\n        message: \"deleteFile: '\" + fileName + \"' - \" + e.message\n      }\n    }\n    return true;\n  }\n\n  formatDisk() {\n\n    this.files = [];\n    this.data  = {};\n\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  constructor( sys ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    this.sys = sys;\n\n    this.files = [];\n    this.data  = {};\n    this.deviceId = 1;\n\n  }\n\n  init() {}\n\n  ready() {\n    return true;\n  }\n\n  exists( fileName ) {\n\n    var el = document.getElementById( fileName );\n\n    if( el ) {\n      return true;\n    }\n  }\n\n  saveFile( fileName, data, type, size ) {\n\n    throw { message: \"saveFile '\"+fileName+\"' - SCRIPTURL is readonly\" }\n\n  }\n\n  makeDataContainer( data ) {\n    return {\n      success: true,\n      data: data\n    }\n  }\n\n  loadTextFromURL( url, cb ){\n      // read text from URL location\n      var request = new XMLHttpRequest();\n      var _this = this;\n\n      request.onreadystatechange = function () {\n          if (request.readyState === 4 && request.status === 200) {\n\n              _this.loadedFile( url, cb, _this.makeDataContainer( request.responseText ) );\n          }\n      }\n      request.overrideMimeType(\"text/plain\");\n      request.open('GET', url, true);\n      request.send(null);\n  }\n\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n  loadFile( fileName, cbRec ) {\n\n    if( ! this.exists( fileName ) ) {\n      throw makeError(\"File not found\");\n    }\n\n    var el = document.getElementById( fileName );\n\n    if( el.innerText.trim() == \"\" ) {\n\n      var found = false;\n      if( el.src ) {\n        if( el.src != \"\" ) {\n          found = true;\n        }\n      }\n      if(! found ) {\n          return { type: \"bas\", data: \"10 print \\\"?program not found error\\\"\" };\n      }\n\n      this.loadTextFromURL( el.src, cbRec );\n\n\n    }\n    else {\n\n      var lines = el.innerText.split(\"\\n\");\n      var data = \"\";\n      for( var i=0; i<lines.length; i++) {\n        if( data != \"\") { data += \"\\n\"; }\n        data+= lines[ i ].trim();\n      }\n\n      cbRec.clazz[ cbRec.method ]( fileName, cbRec, this.makeDataContainer( data ) );\n\n      /*\n\n        loadFile( path, cb )\n        loadedFile( path, cb, data )\n      */\n\n    }\n\n  }\n\n  loadedFile( fileName, cbRec, data) {\n    cbRec.clazz[ cbRec.method ]( fileName, cbRec, data );\n  }\n\n  getDir( path, defaultMatcherFunction ) {\n    var scriptsDom = document.getElementsByTagName(\"script\");\n    var scripts = [];\n\n    for( var i=0; i<scriptsDom.length; i++) {\n      var item = scriptsDom.item(i);\n      //if(item.type == \"text/basic\" ) {\n        console.log( item.attributes.id );\n        var id = item.attributes.id.nodeValue;\n\n        scripts.push(  { fname: id } );\n    }\n\n    if( path != \"*\" && path != \"\" ) {\n\n      var files2 = [];\n\n      for( var i=0; i<scripts.length; i++) {\n        if( defaultMatcherFunction (  path, scripts[i].fname ) ) {\n          files2.push( scripts[ i ] );\n        }\n      }\n\n      scripts = files2;\n    }\n\n    return {files:  scripts, title: \"page scripts\", free: 0 };\n\n  }\n\n  deleteFile( fileName ) {\n\n    throw { message: \"SCRIPTURL is readonly\" }\n\n  }\n\n  formatDisk() {\n\n    throw { message: \"formatDisk '\"+fileName+\"' - SCRIPTURL is readonly\" }\n\n  }\n\n}\n\nexport { FILESYSMODULE as default};\n","class FILESYSMODULE {\n\n  /* QFS - Qualified file system */\n  /* Qualified paths can be used to find files on other file system*/\n  constructor( sys, dependencies ) {\n    if(!sys) {\n      throw \"sys expected\";\n    }\n    if(!dependencies) {\n      throw \"dependencies expected\";\n    }\n\n    this.dependencies = dependencies;\n    this.initialized = false;\n    this.sys = sys;\n    this.defaultFS = sys.bootCfg.fs.default;\n    this.currentFS = this.defaultFS;\n\n    this.validCharacters =\n      \"abcdefghijklmnopqrstuvwxyz\" +\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\" +\n      \"0123456789+-._\";\n\n  }\n\n  init() {\n    this.initialize();\n  }\n\n  initialize() {\n\n    this.fsList = [];\n    var dependencies = this.dependencies;\n\n    for( var i=0; i< dependencies.length; i++) {\n        var fsToken = dependencies[i];\n        var fs = {\n          token: fsToken,\n          fs: this.sys.m[ fsToken ],\n          prefix: fsToken + \"://\",\n          device: this.sys.m[ fsToken ].deviceId\n        }\n        this.fsList.push( fs );\n    }\n\n     this.initialized = true;\n  }\n\n  matcher( matchString, fileName ) {\n    if( matchString.endsWith( \"*\" ) ) {\n      var newMatchString = matchString.substr( 0, matchString.length - 1 );\n      if( fileName.startsWith( newMatchString )) {\n        return true;\n      }\n    }\n    else if( matchString.startsWith( \"*\" ) ) {\n      var newMatchString = matchString.substr( 1 );\n      if( fileName.endsWith( newMatchString )) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getCurrent() {\n    return this.currentFS;\n  }\n\n  getFSByDevId(deviceId) {\n\n      var fsList = this.fsList;\n\n      for( var i=0; i< fsList.length; i++) {\n          var fs = fsList[i];\n          if( fs.device == deviceId ) {\n            return fs;\n          }\n      }\n      return null;\n  }\n\n  checkFS( qpath0 ) {\n\n    if( (typeof qpath0 ).toLowerCase() == \"number\" ) {\n        return this.getFSByDevId(qpath0);\n    }\n\n    var qpath = qpath0;\n    var fsList = this.fsList;\n\n    if( qpath.split(\"://\").length == 1 ) { //no prefix\n      qpath = qpath0 + \"://\";\n    }\n\n    for( var i=0; i< fsList.length; i++) {\n        var fs = fsList[i];\n        if( qpath.startsWith( fs.prefix ) ) {\n          return fs;\n        }\n    }\n    return null;\n  }\n\n  setFS( path ) {\n\n    var fs;\n\n    fs = this.checkFS(path);\n\n    if( ! fs ) {\n      return false;\n    }\n    this.currentFS = fs.token;\n    return true;\n  }\n\n  listFS() {\n    var list = [];\n    var fsList = this.fsList;\n\n    for( var i=0; i< fsList.length; i++) {\n        var fs = fsList[ i ];\n        list.push( {\n          name: fs.prefix,\n          device: fs.device\n\n        } ) ;\n    }\n\n    list.sort((a, b) => (a.device > b.device) ? 1 : -1)\n\n    return list;\n  }\n\n  ready() {\n    return this.initialized;\n  }\n\n  getFS( qpath ) {\n\n    if( (typeof qpath ).toLowerCase() == \"number\" ) {\n        return this.getFSByDevId(qpath);\n    }\n\n    var fsList = this.fsList;\n\n    if( qpath.split(\"://\").length == 1 ) { //no prefix\n      for( var i=0; i< fsList.length; i++) {\n          var fs = fsList[i];\n          if( (this.currentFS + \"://\") == fs.prefix ) {\n            return fs;\n          }\n      }\n    }\n\n    for( var i=0; i< fsList.length; i++) {\n        var fs = fsList[i];\n        if( qpath.startsWith( fs.prefix ) ) {\n          return fs;\n        }\n    }\n\n    //this.currentFS\n\n    return null;\n  }\n\n  getLPath( qpath ) {\n    if( (typeof qpath ).toLowerCase() == \"number\" ) {\n      return \"\";\n    }\n    var parts = qpath.split(\"://\");\n    if( parts.length <2 ) { return qpath; }\n    return parts[ 1 ];\n  }\n\n  getDir( qpath ) {\n\n    if( !this.initialized ) {\n      return {\n        files: [],\n        title: \"null\",\n        free: -1,\n        fs: \"?\"\n      };\n    }\n\n    var fsRecord = this.getFS( qpath );\n\n    if( !fsRecord ) {\n      return {\n        files: [],\n        title: \"null\",\n        free: -1,\n        fs: \"?\"\n      };\n    }\n    var result = fsRecord.fs.getDir( this.getLPath( qpath), this.matcher );\n    result.fs = fsRecord.prefix;\n    return result;\n  }\n\n  existsFile( qpath ) {\n\n    if( !this.initialized ) {\n      return false;\n    }\n\n    return false;\n  }\n\n  checkFileName( f ) {\n    for( var i=0; i<f.length; i++ ) {\n      var c = f.charAt(i);\n      if( this.validCharacters.indexOf( c ) < 0 ) {\n        return false;\n      }\n    }\n    return true;\n\n  }\n\n  doCallBack( callback, callBackResponse ) {\n\n    if( callback.clazz )  {\n\n        if( callback.data ) {\n          callBackResponse.cbData = callback.data;\n        }\n        callback.clazz[ callback.method ]( callBackResponse );\n\n    }\n    else {\n        callback( callBackResponse );\n    }\n\n\n  }\n\n  saveFile(\n      /*mandatory*/ qpath0, data, callRecord,\n      /*optional*/ type, length ) {\n\n    if( !this.initialized ) {\n      return null;\n    }\n\n    var qpath = qpath0.toLowerCase();\n\n    var fsRecord = this.getFS( qpath );\n    if( !fsRecord ) {\n      throw { message: qpath + \" has unknown file system\" };\n    }\n\n    var lpath = this.getLPath( qpath );\n    if( !lpath ) {\n      throw { message: \"QPath '\" + qpath + \"' has no local path\" };\n    }\n\n    if( !this.checkFileName( lpath ) ) {\n      throw { message: \"path '\" + lpath + \"' has invalid characters\" };\n    }\n\n    var result = fsRecord.fs.saveFile( lpath, data, type, length );\n\n    var args = {};\n    args.qpath = qpath;\n    args.type = type;\n    args.length = length;\n\n\n    var callBackResponse = { result: result, args: args, origCallBackRecord: callRecord };\n\n    this.doCallBack( callRecord, callBackResponse );\n\n    return null;\n\n  }\n\n  makeError( reason, details ) {\n    return {\n      success: false,\n      reason: reason,\n      details: details,\n      fsErrorSignature: true,\n    }\n  }\n\n\n  loadFile( qpath0 , callRecord  ) {\n\n    var qpath = qpath0.toLowerCase();\n\n    var cbRec = callRecord;\n    var makeError = this.makeError;\n\n    if( !this.initialized ) {\n\n      cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError(\"Not Initialized\") );\n\n      return;\n    }\n\n    var fsRecord = this.getFS( qpath );\n\n    if( !fsRecord ) {\n\n      cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError(qpath + \" has unknown file system\") );\n\n      return;\n    }\n\n    var lpath = this.getLPath( qpath );\n    if( !lpath ) {\n\n      cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError( \"QPath '\" + qpath + \"' has no local path\" ) );\n\n      return;\n    }\n\n    if( !this.checkFileName( lpath ) ) {\n      throw { message: \"path '\" + lpath + \"' has invalid characters\" };\n    }\n    //original calling callrecord looks like this\n    //var callRecord = { clazz: this, method: \"loadedApp\" }\n\n    var wrappedCallBackRecord = {\n        origCallBackRecord: callRecord,\n        qpath: qpath,\n        clazz: this,\n        method: \"loadedFile\"\n    };\n\n    try {\n      fsRecord.fs.loadFile( lpath, wrappedCallBackRecord );\n    }\n    catch( e ){\n      if( e.fsErrorSignature ) {\n        cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError( e.reason ) );\n        return;\n      }\n      else {\n        cbRec.clazz[ cbRec.method ]( qpath, cbRec , makeError( \"Internal error\", e ) );\n        return;\n      }\n    }\n\n  }\n\n  loadedFile( path, cbWrapRec, response ) {\n    var cbRec = cbWrapRec.origCallBackRecord;\n    cbRec.clazz[ cbRec.method ]( cbWrapRec.qpath, cbRec , response );\n  }\n\n\n  /*\n\n    loadFile( path, cb )\n    loadedFile( path, cb, data )\n  */\n\n  deleteFile( qpath0, callRecord ) {\n\n    if( !this.initialized ) {\n      return null;\n    }\n\n    var qpath = qpath0.toLowerCase();\n\n    var fsRecord = this.getFS( qpath );\n    if( !fsRecord ) {\n      throw { message: qpath + \" has unknown file system\" };\n    }\n\n    var lpath = this.getLPath( qpath );\n    if( !lpath ) {\n      throw { message: \"QPath '\" + qpath + \"' has no local path\" };\n    }\n\n    if( !this.checkFileName( lpath ) ) {\n      throw { message: \"path '\" + lpath + \"' has invalid characters\" };\n    }\n\n    //TODO asynch delete\n    var result = fsRecord.fs.deleteFile( lpath );\n\n    var args = {};\n    args.qpath = qpath;\n\n    var callBackResponse = { result: result, args: args, origCallBackRecord: callRecord };\n\n    this.doCallBack( callRecord, callBackResponse );\n\n    return null;\n  }\n\n  formatDisk( qpath ) {\n\n    if( ! this.existsFile( fileName ) ) {\n      return \"no such file\";\n    }\n\n    return \"error\";\n\n  }\n}\n\nexport { FILESYSMODULE as default};\n"],"names":["SYMBOLSIMAGE","getBlobURL","TILES","constructor","img","gridw","gridh","transCol","this","iconGrid","w","width","h","height","iconCanvas","document","createElement","iconContext","getContext","drawImage","xiconcount","xiconrowcount","yicon","xicon","offset","sx","sy","sd","getImageData","data","xoffset","yoffset","rowoffset","grid","y","row","x","pix","r","g","b","push","getCharData","i","MrBeepChannel","audioCtx","waveform","masterVolume","volumeFunc","initialized","initializedFully","effects","FLR","FS","VLR","VS","enable","_init","disable","maxGain","gain","value","createGain","connect","volumeValue","b0","b1","b2","b3","b4","b5","b6","filter","createBiquadFilter","type","frequency","Q","node","createScriptProcessor","onaudioprocess","e","output","outputBuffer","getChannelData","white","Math","random","occilator","setValueAtTime","currentTime","createOscillator","start","setVolume","volume","playBeep","duration","durInSeconds","durInSeconds0","durInSeconds1","durInSeconds2","now","cancelScheduledValues","linearRampToValueAtTime","clearEffect","addEffect","time","length","playEffect","freq","setAttackDecayRelease","attackT","decayT","releaseT","setSustainLevel","sustainV","playSound","sustainT","durInSeconds3","setFrequency","f","startSound","releaseSound","MrBeep","window","AudioContext","webkitAudioContext","channels","defaults","masterGain","destination","channelCount","_int_v2g","_int_log10","log","LN10","v","console","reset","channelVolume","channel","channelFrequency","channelSetAttackDecayRelease","channelSetSustainLevel","DATA","options","opts","opt","display","navigator","clipboard","readText","fg","bg","border","getOptions","HANDLERS","menuSys","sys","setBasic","basic","m","doExposedAction","id","handler_pasteFromClip","handler_pasteBox","pastebox","style","pasteArea","defaultPasteText","oldInnerText","innerText","input","unsetInputHandler","clearMenu","hideMenu","color","backgroundColor","bgColor","focus","select","out","hideInner","__this","pasteHandler","setTimeout","pasteHandler2","showInner","unhideMenu","setInput","removeEventListener","pasteTextFromClipboard","addEventListener","alert","then","clipText","bootCfg","fs","default","mode","warnings","privacyMute","subSys","keyboard","allowDefault","all","events","adEvents","boot","cfg","staticFlag","init","staticTarget","headerElement","domContainer","body","appendChild","SIG","SUBSYS","VERSION","CODENAME","nulcon","rootScript","getElementById","displayMode","parseInt","dataset","isNaN","bootMode","dynamicMinTarget","indexOf","bootDebug","getSys","initSimpleLogging","buf","getAll","writeln","txt","s","rawlog","array","line","j","sep","rawlogcon","args","Array","prototype","slice","call","arguments","apply","logwarn","warn","logerr","error","addModule","toList","checkL","dep","deps","mods","ci","displaymodes","drivers","tablecon","canvas","modes","textmode1","textmode2","textmode3","menuCreated","getDriver","currentDriver","getMode","getModes","getCurrentMode","currentMode","setMode","menu","Number","dc","getDeviceConfig","cm","endMode","create","device","initMode","config","notifyOnClick","basicmenu","destroy","undefined","tmp","split","driver","splice","cursorOn","cols","rows","hidden","blinking","reverse","outColors","fontSizeInt","fontSizeCSS","fontFamily","htmlPalette","txtBgColor","txtColor","htmlColor","ix","outDiv0","remove","cvs","cvs2","ctx","ctx2","rowel","cellel","blinkInterval","clearInterval","getColumCount","getRowCount","getDimensions","headerElementManager","msgs","queuedMessages","inputElement","colsPercentage","outDiv1","outEl","event","sel","selection","createRange","toString","getSelection","rangeCount","getRangeAt","cloneContents","childNodes","text","rix","cix","firstChild","getTextOfSelection","clipboardData","setData","preventDefault","table","borderCollapse","borderSpacing","resize","fontSize","tableLayout","readOnly","textAlign","tr","padding","maxHeight","rowArray","td","textOverflow","whiteSpace","overflow","maxWidth","innerHTML","position","zIndex","verticalAlign","marginLeft","marginRight","get","setDimensions","clientWidth","dirty","dirtyFlags","_this","setInterval","_int_blink","native","operation","action","blinkMode","hasPixels","_int_updateArea","srccells","x0","y0","x1","y1","cell","src","textContent","update","p","list","_int_blinkOff","show","cx","cy","el","cells","x2","y2","updateAll","hide","getElement","clear","__int_nl","__int_scrollDown","str","c","substr","__int_write_direct_ch","ch","cellyp1","cursorMode","bmFontEnable","colors","palette","pad2","hs","rv","pl","htmlCol","newcolor","floor","bmPalette","defaultTextMode","image","Image","onload","evt","_postLoadFontImage","fimage","GLYPHSADDR","NaN","characterbank0","characterbank1","characterbank2","characterbank3","bankDefaultBaseAddr","bankBaseAddr","bfont","cvsCursor","ctxCursor","cache","fontSizeIntW","fontSizeIntH","oc","bgHTML","fgHTML","bgRGB","fgRGB","ww","innerWidth","wh","innerHeight","startsWith","percentages","percentagex","percentagey","percentage","fsw","fsh","center","alpha","strokeStyle","cX","cY","updCtxImageData","synched","offsets","font","textBaseline","fsid2","tmp0","measureText","oIndicatorChar","oIndicatorSize","oIndicatorOffset","handler","myFunction","_int_storeset_color","oldfg","oldbg","_int_restore_color","index","index2","paintCursor","yy","offX","_int_paintchar","col1","col2","_int_drawIndicator","fillStyle","fillRect","setCharacterBank","addr","characterbank","cacheel","charAddr","relCode","code","charCodeAt","bitmapchar","tmp3","tmpw","imgdata","yofflen","bgc","fgc","xx","putImageData","off","fillText","op_gcolor","params","op_line","beginPath","moveTo","lineTo","stroke","gfxUpdate","record","lineLen","pixels","upd","imd","pdata","xrel","getBitmapDimensions","mrbeepaudio","mrBeep","simplewarning","key","warningOngoing","notify","simpleWarning","oldBGColor","priv","verified","denied","confirmLocalStorage","localStorage","getItem","confirm","setItem","mutedinput","getKey","setInputHandler","clazz","prefix","domelinput","evtQueueKeyPress","target","shift","elFun","checkIfAllowDefault","ad","l","queuekp","kEvent","keyLabel","shiftKey","ctrlKey","inputMode","htmlwrapper","isAttr","executeFunction","paramArray","backgroundImage","backgroundSize","execute","htmlCodeArr","htmlCode","handle","htmlHandle","setnode","htmlAppend","htmlValue","arr","attr","attributes","getNamedItem","attrName","nodeValue","setAttribute","parentNode","parts","elName","apps","audioInitFlag","audioInit","audio","con","settings","worker","Worker","qfs","loadFile","method","initMore","settingsPath","cbMessage","settingsLoadResponse","success","postMessage","windowWidth","windowHeight","bWH","_parent","onmessage","message","t","write","writec","d","parCount","p1","p2","p3","p4","showMenu","setPos","loadAppFromProgram","loadDataFromProgram","saveProgram","deleteFile","dir","path","setfs","setStatus","listfs","cursor","processId","messageObject","textW","textH","bitmapW","bitmapH","properties","areasList","callback","saveFile","writeText","status","windowResizeEvent","sub","nullHandler","loadApp","url0","block","charAt","requestClipboardCopy","requestClipboardCopyScreen","requestColorReset","requestExport","requestFileSystems","listFS","list2","requestShowList","requestListDirectory","getDir","getCurrent","files","fname","requestListScripts","script","requestAbout","requestList","requestRenumber","requestNew","requestVars","requestDataBlocks","requestHelp","requestClearScreen","requestResetConsole","requestRun","requestStop","devicePath","reason","deletedFile","qpath","result","origCallBackRecord","savedProgram","url","label","dev","getFS","loadedApp","response","pgmData","QPath","loadedDataFromProgram","loadedAppFromProgram","currentFs","setFS","path0","title","free","inputKeyHandler","doAction","handlers","menus","statusWidgets","pgmLen","varLen","mnuBttnOptContainers","mnuBttnOptContainersTgl","mnuBttns","mnuBttnContainers","mnuLinks","statusTopMargin","statusColor","statusBgColor","statusFont","cnt","getOnClickMenuButtonFunc","ll","k","lnk","getClickLinkFunc","getOnOverLinkFunc","element","flag","button","parent","menuOptions","div0","buttn0","div1","borderTop","borderBottom","borderLeft","borderRight","minWidth","active","lnks","o","JSON","stringify","statusItem","marginTop","statusItems","interpreterStatus","buttons","mainOptions","onDeselect","styleButtons","buttonTable","paddingBottom","paddingTop","paste","ta","optLst2","optLstTgl","funData","toLowerCase","parse","k2","lnk2","thisIx","optLst","sfs","deviceId","initialize","currentDisk","privacy","ready","getEmptyDirStructure","name","defaultMatcherFunction","storageName","json","sessionStorage","foundNullIx","files2","setDir","existsFile","fileName","found","removeFromDir","updateDir","programLen","size","fileName0","container","makeError","details","fsErrorSignature","cbRec","_removeFile","removeItem","formatDisk","getFullDisk","disk","content","diskStr","makeDataContainer","disks","diskId","lastDisk","disksNotInitialized","last","selectDisk","getDisks","createDiskFromImage","createDiskFromImage2","createSysDiskFromImage","sysDisk","labl","padStart","outtent","createDisk","newDir","ramfs","exists","fEntry","loadTextFromURL","cb","request","XMLHttpRequest","onreadystatechange","readyState","loadedFile","responseText","overrideMimeType","open","send","trim","lines","scriptsDom","getElementsByTagName","scripts","item","dependencies","defaultFS","currentFS","validCharacters","fsList","fsToken","token","matcher","matchString","endsWith","newMatchString","getFSByDevId","checkFS","qpath0","sort","a","getLPath","fsRecord","checkFileName","doCallBack","callBackResponse","cbData","callRecord","lpath","wrappedCallBackRecord","cbWrapRec","mods0","Object","getOwnPropertyNames","conStyle","onReady"],"sourceRoot":""}